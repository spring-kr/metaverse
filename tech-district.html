<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ”¬ ê¸°ìˆ  ë‹¨ì§€ - ë„ê¹¨ë¹„ ë©”íƒ€ë²„ìŠ¤</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a3e 100%);
            color: white;
            overflow: hidden;
        }
        
        #tech-canvas {
            display: block;
            width: 100vw;
            height: 100vh;
            cursor: crosshair;
        }
        
        /* ë©”ì¸ UI ì»¨í…Œì´ë„ˆ */
        .ui-container {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            pointer-events: none;
        }
        
        .ui-container > * {
            pointer-events: auto;
        }
        
        /* ìƒíƒœ í‘œì‹œ */
        .status-display {
            background: rgba(15, 15, 35, 0.9);
            border: 2px solid #00ffff;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            font-size: 14px;
            backdrop-filter: blur(10px);
            box-shadow: 0 5px 15px rgba(0,255,255,0.3);
        }
        
        /* ì»¨íŠ¸ë¡¤ íŒ¨ë„ */
        .control-panel {
            background: rgba(15, 15, 35, 0.95);
            border: 2px solid #00ffff;
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 5px 20px rgba(0,255,255,0.4);
            min-width: 300px;
        }
        
        .control-btn {
            background: linear-gradient(135deg, #00ffff 0%, #0099cc 100%);
            border: none;
            border-radius: 8px;
            color: #000;
            padding: 12px 16px;
            margin: 5px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.3s ease;
            width: 100%;
            text-align: center;
        }
        
        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 255, 255, 0.4);
        }
        
        /* ë’¤ë¡œê°€ê¸° ë²„íŠ¼ */
        .back-btn {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1001;
            border: none;
            border-radius: 10px;
            color: white;
            padding: 15px 20px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .back-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }
        
        /* ê¸°ìˆ  ë„ê¹¨ë¹„ ì¹´ë“œ */
        .tech-goblin-card {
            background: rgba(15, 15, 35, 0.9);
            border: 2px solid #00ffff;
            border-radius: 15px;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .tech-goblin-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 255, 255, 0.3);
            border-color: #66ffff;
        }
        
        .goblin-name {
            font-size: 18px;
            font-weight: bold;
            color: #00ffff;
            margin-bottom: 8px;
        }
        
        .goblin-specialty {
            font-size: 14px;
            color: #66ddff;
            margin-bottom: 5px;
        }

        /* ğŸ”¬ ê¸°ìˆ  ì±„íŒ… ì‹œìŠ¤í…œ */
        .chat-container {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 350px;
            height: 500px;
            background: linear-gradient(135deg, rgba(0, 20, 40, 0.95), rgba(0, 40, 80, 0.95));
            border: 2px solid #00ffff;
            border-radius: 15px;
            display: none;
            flex-direction: column;
            backdrop-filter: blur(15px);
            box-shadow: 0 10px 30px rgba(0, 255, 255, 0.3);
            z-index: 1000;
        }

        .chat-header {
            background: linear-gradient(90deg, #003366, #0066cc);
            color: white;
            padding: 15px;
            border-radius: 13px 13px 0 0;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #00ffff;
        }

        .chat-close {
            background: none;
            border: none;
            color: #00ffff;
            font-size: 20px;
            cursor: pointer;
            padding: 0;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .chat-close:hover {
            background: rgba(0, 255, 255, 0.2);
        }

        .chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            background: rgba(0, 30, 60, 0.8);
        }

        .message {
            margin: 10px 0;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }

        .message.user-message {
            flex-direction: row-reverse;
        }

        .message .avatar {
            min-width: 35px;
            height: 35px;
            border-radius: 50%;
            background: linear-gradient(135deg, #0066cc, #00ffff);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .message.user-message .avatar {
            background: linear-gradient(135deg, #004080, #0080ff);
        }

        .message .text {
            background: rgba(0, 100, 200, 0.3);
            padding: 10px 15px;
            border-radius: 15px;
            max-width: 250px;
            word-wrap: break-word;
            border: 1px solid rgba(0, 255, 255, 0.3);
            color: #e6f3ff;
        }

        .message.user-message .text {
            background: rgba(0, 150, 255, 0.3);
            border-color: rgba(0, 200, 255, 0.3);
        }

        .chat-input-container {
            padding: 15px;
            border-top: 1px solid rgba(0, 255, 255, 0.3);
            background: rgba(0, 40, 80, 0.9);
            border-radius: 0 0 13px 13px;
        }

        .chat-input {
            width: 100%;
            padding: 10px;
            border: 2px solid #00ffff;
            border-radius: 20px;
            background: rgba(0, 30, 60, 0.8);
            color: #e6f3ff;
            font-size: 14px;
            outline: none;
            transition: all 0.3s ease;
        }

        .chat-input:focus {
            border-color: #66ffff;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
        }

        .chat-input::placeholder {
            color: #66ddff;
        }
    </style>
</head>
<body>
    <!-- ë’¤ë¡œê°€ê¸° ë²„íŠ¼ -->
    <button class="back-btn" onclick="goBackToVillage()">â† ğŸ˜ï¸ ë„ê¹¨ë¹„ ë§ˆì„ë¡œ</button>
    
    <!-- ë©”ì¸ ìº”ë²„ìŠ¤ -->
    <canvas id="tech-canvas"></canvas>
    
    <!-- UI ì»¨í…Œì´ë„ˆ -->
    <div class="ui-container">
        <!-- ìƒíƒœ í‘œì‹œ -->
        <div class="status-display" id="statusDisplay">
            ğŸ”¬ ê¸°ìˆ  ë‹¨ì§€ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!
        </div>
        
        <!-- ğŸ”¬ ì±„íŒ… ì‹œìŠ¤í…œ -->
        <div class="chat-container" id="chatContainer">
            <div class="chat-header">
                <span id="chatTitle">ğŸ”¬ ê¸°ìˆ  ë„ê¹¨ë¹„ì™€ì˜ ëŒ€í™”</span>
                <button class="chat-close" onclick="closeChat()">Ã—</button>
            </div>
            <div class="chat-messages" id="chatMessages"></div>
            <div class="chat-input-container">
                <input type="text" class="chat-input" id="chatInput" 
                       placeholder="ê¸°ìˆ ì— ëŒ€í•´ ì§ˆë¬¸í•´ë³´ì„¸ìš”..." 
                       onkeypress="handleChatKeyPress(event)">
            </div>
        </div>
        
        <!-- ì»¨íŠ¸ë¡¤ íŒ¨ë„ -->
        <div class="control-panel">
            <h2 style="color: #00ffff; margin-bottom: 15px; text-align: center;">ğŸ”¬ ê¸°ìˆ  ë‹¨ì§€</h2>
            
            <div style="margin-bottom: 20px;">
                <h3 style="color: #00ffff; margin-bottom: 10px; font-size: 16px;">ğŸ® ì»¨íŠ¸ë¡¤</h3>
                <button class="control-btn" onclick="toggleAvatar()">ğŸ¤– ì‚¬ì´ë²„ ì•„ë°”íƒ€</button>
                <button class="control-btn" onclick="resetCamera()">ğŸ“· ì¹´ë©”ë¼ ë¦¬ì…‹</button>
                <button class="control-btn" onclick="toggleHologram()">ğŸŒˆ í™€ë¡œê·¸ë¨ ëª¨ë“œ</button>
            </div>
            
            <div style="margin-bottom: 20px;">
                <h3 style="color: #00ffff; margin-bottom: 10px; font-size: 16px;">ğŸš€ ê¸°ìˆ  ë„ê¹¨ë¹„ë“¤</h3>
                <div id="techGoblinGrid">
                    <!-- ê¸°ìˆ  ë„ê¹¨ë¹„ë“¤ì´ ì—¬ê¸°ì— ìƒì„±ë©ë‹ˆë‹¤ -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- Three.js ë° GSAP ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    
    <script>
        // ğŸ”¬ ê¸°ìˆ  ë‹¨ì§€ ì „ì—­ ë³€ìˆ˜
        let scene, camera, renderer, controls;
        let currentChatGoblin = null; // ğŸ”¬ í˜„ì¬ ì±„íŒ… ì¤‘ì¸ ë„ê¹¨ë¹„
        let avatar = null;
        let isSystemReady = false;
        
        // ğŸš€ ìµœì²¨ë‹¨ ê¸°ìˆ  ë„ê¹¨ë¹„ë“¤
        const techGoblins = [
            { name: 'ğŸ¤– AIì—°êµ¬ì›', specialty: 'ì¸ê³µì§€ëŠ¥', description: 'ì°¨ì„¸ëŒ€ AI ì•Œê³ ë¦¬ì¦˜ì„ ê°œë°œí•˜ëŠ” ë„ê¹¨ë¹„', emoji: 'ğŸ¤–', color: 0x00ffff },
            { name: 'ğŸ§¬ ë°”ì´ì˜¤í•´ì»¤', specialty: 'ìƒëª…ê³µí•™', description: 'ìƒëª…ì˜ ë¹„ë°€ì„ íƒêµ¬í•˜ëŠ” ê³¼í•™ ë„ê¹¨ë¹„', emoji: 'ğŸ§¬', color: 0x00ff00 },
            { name: 'ğŸš€ ìš°ì£¼ê³µí•™ì', specialty: 'í•­ê³µìš°ì£¼', description: 'ë³„ë“¤ ì‚¬ì´ë¥¼ ëˆ„ë¹„ëŠ” ìš°ì£¼ì„ ì„ ì„¤ê³„í•˜ëŠ” ë„ê¹¨ë¹„', emoji: 'ğŸš€', color: 0xff6600 },
            { name: 'ğŸ’» ì½”ë“œë§ˆë²•ì‚¬', specialty: 'ì†Œí”„íŠ¸ì›¨ì–´', description: 'ì™„ë²½í•œ ì½”ë“œë¡œ ì„¸ìƒì„ ë°”ê¾¸ëŠ” ë„ê¹¨ë¹„', emoji: 'ğŸ’»', color: 0x9900ff },
            { name: 'âš¡ ì—ë„ˆì§€í˜ì‹ ê°€', specialty: 'ì‹ ì¬ìƒì—ë„ˆì§€', description: 'ë¬´í•œ ì²­ì • ì—ë„ˆì§€ë¥¼ ë§Œë“¤ì–´ë‚´ëŠ” ë„ê¹¨ë¹„', emoji: 'âš¡', color: 0xffff00 },
            { name: 'ğŸ”® ì–‘ìë¬¼ë¦¬í•™ì', specialty: 'ì–‘ìì—­í•™', description: 'ì–‘ìì˜ ì‹ ë¹„ë¥¼ í’€ì–´ë‚´ëŠ” ë„ê¹¨ë¹„', emoji: 'ğŸ”®', color: 0xff00ff }
        ];
        
        // ğŸ¯ ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateStatus(message) {
            const statusElement = document.getElementById('statusDisplay');
            if (statusElement) {
                statusElement.textContent = message;
            }
        }
        
        // ğŸ”™ ë„ê¹¨ë¹„ ë§ˆì„ë¡œ ëŒì•„ê°€ê¸°
        function goBackToVillage() {
            updateStatus('ğŸ˜ï¸ ë„ê¹¨ë¹„ ë§ˆì„ë¡œ ëŒì•„ê°€ëŠ” ì¤‘...');
            // GitHub Pagesìš© ë² ì´ìŠ¤ URL ê³„ì‚°
            const baseURL = window.location.origin + window.location.pathname.replace(/\/[^\/]*$/, '/');
            setTimeout(() => {
                window.location.href = baseURL + 'index.html';
            }, 1000);
        }
        
        // ğŸ® ì•„ë°”íƒ€ í† ê¸€
        function toggleAvatar() {
            if (!avatar) {
                createAvatar();
            } else {
                removeAvatar();
            }
        }
        
        // ğŸ¤– ì‚¬ì´ë²„ ì•„ë°”íƒ€ ìƒì„±
        function createAvatar() {
            avatar = new THREE.Group();
            
            // ì‚¬ì´ë²„ ëª¸ì²´ (ìœ¡ê°í˜•)
            const bodyGeometry = new THREE.CylinderGeometry(0.4, 0.5, 1.8, 6);
            const bodyMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x00ffff,
                transparent: true,
                opacity: 0.8,
                emissive: 0x003333
            });
            const body = new THREE.Mesh(bodyGeometry, bodyMaterial);
            body.position.y = 1;
            avatar.add(body);
            
            // í™€ë¡œê·¸ë¨ í—¤ë“œ
            const headGeometry = new THREE.SphereGeometry(0.5, 8, 6);
            const headMaterial = new THREE.MeshBasicMaterial({ 
                color: 0x00ffff,
                wireframe: true,
                transparent: true,
                opacity: 0.7
            });
            const head = new THREE.Mesh(headGeometry, headMaterial);
            head.position.y = 2.5;
            avatar.add(head);
            
            // ì‚¬ì´ë²„ íŒ”ë“¤
            const armGeometry = new THREE.CylinderGeometry(0.1, 0.12, 1.2);
            const armMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x0099cc,
                emissive: 0x002233
            });
            
            const leftArm = new THREE.Mesh(armGeometry, armMaterial);
            leftArm.position.set(-0.6, 1, 0);
            leftArm.rotation.z = 0.3;
            avatar.add(leftArm);
            
            const rightArm = new THREE.Mesh(armGeometry, armMaterial);
            rightArm.position.set(0.6, 1, 0);
            rightArm.rotation.z = -0.3;
            avatar.add(rightArm);
            
            // í™€ë¡œê·¸ë¨ ë§ë“¤
            for (let i = 0; i < 3; i++) {
                const ringGeometry = new THREE.RingGeometry(1 + i * 0.3, 1.2 + i * 0.3, 16);
                const ringMaterial = new THREE.MeshBasicMaterial({ 
                    color: 0x00ffff,
                    transparent: true,
                    opacity: 0.3,
                    side: THREE.DoubleSide
                });
                const ring = new THREE.Mesh(ringGeometry, ringMaterial);
                ring.rotation.x = -Math.PI / 2;
                ring.position.y = 0.1;
                avatar.add(ring);
                
                gsap.to(ring.rotation, {
                    z: Math.PI * 2,
                    duration: 3 - i * 0.5,
                    repeat: -1,
                    ease: "none"
                });
            }
            
            avatar.position.set(0, 0, 0);
            scene.add(avatar);
            
            if (camera && controls) {
                gsap.to(camera.position, {
                    x: 5, y: 8, z: 12,
                    duration: 1.5,
                    ease: "power2.out"
                });
                gsap.to(controls.target, {
                    x: 0, y: 1, z: 0,
                    duration: 1.5,
                    ease: "power2.out",
                    onUpdate: () => controls.update()
                });
            }
            
            updateStatus('ğŸ¤– ì‚¬ì´ë²„ ì•„ë°”íƒ€ê°€ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }
        
        // ğŸ¤– ì•„ë°”íƒ€ ì œê±°
        function removeAvatar() {
            if (avatar) {
                while(avatar.children.length > 0) {
                    const child = avatar.children[0];
                    avatar.remove(child);
                    if (child.geometry) child.geometry.dispose();
                    if (child.material) child.material.dispose();
                }
                scene.remove(avatar);
                avatar = null;
                updateStatus('ğŸ‘‹ ì‚¬ì´ë²„ ì•„ë°”íƒ€ê°€ ë¹„í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤');
            }
        }
        
        // ğŸ“· ì¹´ë©”ë¼ ë¦¬ì…‹
        function resetCamera() {
            if (camera && controls) {
                gsap.to(camera.position, {
                    x: 0, y: 20, z: 30,
                    duration: 1.5,
                    ease: "power2.out"
                });
                gsap.to(controls.target, {
                    x: 0, y: 0, z: 0,
                    duration: 1.5,
                    ease: "power2.out",
                    onUpdate: () => controls.update()
                });
                updateStatus('ğŸ“· ì¹´ë©”ë¼ê°€ ê¸°ìˆ  ë‹¨ì§€ ì¤‘ì‹¬ìœ¼ë¡œ ë¦¬ì…‹ë˜ì—ˆìŠµë‹ˆë‹¤');
            }
        }
        
        // ğŸŒˆ í™€ë¡œê·¸ë¨ ëª¨ë“œ í† ê¸€
        function toggleHologram() {
            const modes = ['ğŸŒˆ í™€ë¡œê·¸ë¨', 'âš¡ ì—ë„ˆì§€ í•„ë“œ', 'ğŸ”® ì–‘ì ê³µê°„', 'ğŸ’ í¬ë¦¬ìŠ¤í„¸'];
            const randomMode = modes[Math.floor(Math.random() * modes.length)];
            updateStatus(`ğŸ”¬ ê¸°ìˆ  ë‹¨ì§€ê°€ ${randomMode} ëª¨ë“œë¡œ ë³€í™˜ë˜ì—ˆìŠµë‹ˆë‹¤`);
        }
        
        // ğŸ·ï¸ ê¸°ìˆ  ë„ê¹¨ë¹„ ì´ë¦„í‘œ ìƒì„±
        function createTechGoblinNameTag(name, specialty) {
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            canvas.width = 512;
            canvas.height = 256;
            
            // ì‚¬ì´ë²„ ë°°ê²½
            const gradient = context.createLinearGradient(0, 0, canvas.width, canvas.height);
            gradient.addColorStop(0, 'rgba(0, 15, 35, 0.9)');
            gradient.addColorStop(1, 'rgba(0, 51, 102, 0.9)');
            context.fillStyle = gradient;
            context.fillRect(0, 0, canvas.width, canvas.height);
            
            // ë„¤ì˜¨ í…Œë‘ë¦¬
            context.strokeStyle = '#00ffff';
            context.lineWidth = 6;
            context.strokeRect(3, 3, canvas.width - 6, canvas.height - 6);
            
            // ë‚´ë¶€ ë°œê´‘ íš¨ê³¼
            context.strokeStyle = '#66ffff';
            context.lineWidth = 2;
            context.strokeRect(10, 10, canvas.width - 20, canvas.height - 20);
            
            // ì´ë¦„ í…ìŠ¤íŠ¸ (ë„¤ì˜¨ íš¨ê³¼)
            context.shadowColor = '#00ffff';
            context.shadowBlur = 20;
            context.fillStyle = '#00ffff';
            context.font = 'bold 42px Arial';
            context.textAlign = 'center';
            context.fillText(name, canvas.width / 2, 80);
            
            // ì „ë¬¸ ë¶„ì•¼ í…ìŠ¤íŠ¸
            context.shadowBlur = 10;
            context.fillStyle = '#66ddff';
            context.font = '28px Arial';
            context.fillText(specialty, canvas.width / 2, 130);
            
            // ì‚¬ì´ë²„ ê·¸ë¦¬ë“œ ë¼ì¸ë“¤
            context.shadowBlur = 0;
            context.strokeStyle = '#0099cc';
            context.lineWidth = 1;
            for (let i = 0; i < 10; i++) {
                const x = (i + 1) * canvas.width / 11;
                context.beginPath();
                context.moveTo(x, 160);
                context.lineTo(x, 180);
                context.stroke();
            }
            
            // í™€ë¡œê·¸ë¨ ì ë“¤
            context.fillStyle = '#00ffff';
            for (let i = 0; i < 8; i++) {
                const x = 60 + i * 50;
                const y = 200;
                context.beginPath();
                context.arc(x, y, 4, 0, Math.PI * 2);
                context.fill();
                
                // ì‘ì€ ë°œê´‘ íš¨ê³¼
                context.shadowColor = '#00ffff';
                context.shadowBlur = 8;
                context.fill();
                context.shadowBlur = 0;
            }
            
            const texture = new THREE.CanvasTexture(canvas);
            texture.needsUpdate = true;
            
            const planeGeometry = new THREE.PlaneGeometry(4, 2);
            const planeMaterial = new THREE.MeshBasicMaterial({ 
                map: texture, 
                transparent: true,
                side: THREE.DoubleSide
            });
            
            const nameTagMesh = new THREE.Mesh(planeGeometry, planeMaterial);
            nameTagMesh.userData.isNameTag = true;
            
            return nameTagMesh;
        }
        
        // ğŸš€ 3D ê¸°ìˆ  ë„ê¹¨ë¹„ë“¤ ìƒì„±
        function createTech3DGoblins() {
            techGoblins.forEach((goblin, index) => {
                const goblin3D = createTech3DGoblin(goblin, index);
                scene.add(goblin3D);
            });
        }
        
        // ğŸš€ ê°œë³„ 3D ê¸°ìˆ  ë„ê¹¨ë¹„ ìƒì„±
        function createTech3DGoblin(goblinData, index) {
            const goblinGroup = new THREE.Group();
            
            // ë¯¸ë˜í˜• ëª¸ì²´ (ë‹¤ë©´ì²´)
            const bodyGeometry = new THREE.OctahedronGeometry(1.2);
            const bodyMaterial = new THREE.MeshPhongMaterial({ 
                color: goblinData.color,
                shininess: 100,
                transparent: true,
                opacity: 0.8,
                emissive: goblinData.color,
                emissiveIntensity: 0.2
            });
            const body = new THREE.Mesh(bodyGeometry, bodyMaterial);
            body.position.y = 1.5;
            goblinGroup.add(body);
            
            // í™€ë¡œê·¸ë¨ í—¤ë“œ
            const headGeometry = new THREE.IcosahedronGeometry(0.8);
            const headMaterial = new THREE.MeshBasicMaterial({ 
                color: goblinData.color,
                wireframe: true,
                transparent: true,
                opacity: 0.6
            });
            const head = new THREE.Mesh(headGeometry, headMaterial);
            head.position.y = 3;
            goblinGroup.add(head);
            
            // ê¸°ìˆ  ì•ˆí…Œë‚˜ë“¤
            for (let i = 0; i < 4; i++) {
                const antennaGeometry = new THREE.CylinderGeometry(0.02, 0.05, 1.5);
                const antennaMaterial = new THREE.MeshBasicMaterial({ 
                    color: goblinData.color,
                    emissive: goblinData.color,
                    emissiveIntensity: 0.5
                });
                const antenna = new THREE.Mesh(antennaGeometry, antennaMaterial);
                
                const angle = (i / 4) * Math.PI * 2;
                antenna.position.set(
                    Math.cos(angle) * 0.8,
                    3.8,
                    Math.sin(angle) * 0.8
                );
                antenna.rotation.z = angle;
                goblinGroup.add(antenna);
            }
            
            // ì—ë„ˆì§€ ì½”ì–´
            const coreGeometry = new THREE.SphereGeometry(0.3);
            const coreMaterial = new THREE.MeshBasicMaterial({ 
                color: goblinData.color,
                transparent: true,
                opacity: 0.8
            });
            const core = new THREE.Mesh(coreGeometry, coreMaterial);
            core.position.y = 1.5;
            goblinGroup.add(core);
            
            // í™€ë¡œê·¸ë¨ ì˜¤ë¼ë“¤
            for (let i = 0; i < 3; i++) {
                const auraGeometry = new THREE.RingGeometry(1.8 + i * 0.4, 2.2 + i * 0.4, 16);
                const auraMaterial = new THREE.MeshBasicMaterial({ 
                    color: goblinData.color,
                    transparent: true,
                    opacity: 0.15,
                    side: THREE.DoubleSide
                });
                const aura = new THREE.Mesh(auraGeometry, auraMaterial);
                aura.rotation.x = -Math.PI / 2;
                aura.position.y = 0.1;
                goblinGroup.add(aura);
                
                gsap.to(aura.rotation, {
                    z: Math.PI * 2,
                    duration: 4 + i,
                    repeat: -1,
                    ease: "none"
                });
            }
            
            // ì´ë¦„í‘œ ì¶”ê°€
            const nameTag = createTechGoblinNameTag(goblinData.name, goblinData.specialty);
            nameTag.position.set(0, 5.5, 0);
            goblinGroup.add(nameTag);
            
            // ìœ„ì¹˜ ì„¤ì • (ìœ¡ê°í˜• ë°°ì¹˜)
            const angle = (index / techGoblins.length) * Math.PI * 2;
            const radius = 22;
            const x = Math.cos(angle) * radius;
            const z = Math.sin(angle) * radius;
            goblinGroup.position.set(x, 0, z);
            
            goblinGroup.lookAt(0, 1, 0);
            
            goblinGroup.userData = {
                goblinData: goblinData,
                index: index,
                isTechGoblin: true
            };
            
            // ë¯¸ë˜í˜• ì• ë‹ˆë©”ì´ì…˜
            gsap.to(goblinGroup.position, {
                y: Math.sin(index) * 0.5,
                duration: 3 + index * 0.4,
                repeat: -1,
                yoyo: true,
                ease: "sine.inOut"
            });
            
            // ëª¸ì²´ íšŒì „
            gsap.to(body.rotation, {
                y: Math.PI * 2,
                duration: 8 + index,
                repeat: -1,
                ease: "none"
            });
            
            // í—¤ë“œ íšŒì „
            gsap.to(head.rotation, {
                x: Math.PI * 2,
                y: Math.PI * 2,
                duration: 6 + index * 0.5,
                repeat: -1,
                ease: "none"
            });
            
            // ì½”ì–´ í„ìŠ¤
            gsap.to(core.scale, {
                x: 1.5, y: 1.5, z: 1.5,
                duration: 2,
                repeat: -1,
                yoyo: true,
                ease: "sine.inOut"
            });
            
            return goblinGroup;
        }
        
        // ğŸš€ ê¸°ìˆ  ë„ê¹¨ë¹„ í´ë¦­ ì²˜ë¦¬
        function onTechCanvasClick(event) {
            if (!camera || !scene) return;
            
            const rect = renderer.domElement.getBoundingClientRect();
            const mouse = new THREE.Vector2();
            mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
            mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;
            
            const raycaster = new THREE.Raycaster();
            raycaster.setFromCamera(mouse, camera);
            
            const intersects = raycaster.intersectObjects(scene.children, true);
            
            if (intersects.length > 0) {
                let clickedObject = intersects[0].object;
                
                while (clickedObject && !clickedObject.userData.isTechGoblin) {
                    clickedObject = clickedObject.parent;
                }
                
                if (clickedObject && clickedObject.userData.isTechGoblin) {
                    const goblinData = clickedObject.userData.goblinData;
                    selectTechGoblin(goblinData);
                    
                    gsap.to(clickedObject.scale, {
                        x: 1.3, y: 1.3, z: 1.3,
                        duration: 0.2,
                        yoyo: true,
                        repeat: 1,
                        ease: "power2.out"
                    });
                }
            }
        }
        
        // ğŸš€ ê¸°ìˆ  ë„ê¹¨ë¹„ ì¹´ë“œ ìƒì„±
        function createTechGoblinCards() {
            const gridElement = document.getElementById('techGoblinGrid');
            
            techGoblins.forEach((goblin, index) => {
                const card = document.createElement('div');
                card.className = 'tech-goblin-card';
                card.onclick = () => selectTechGoblin(goblin);
                
                card.innerHTML = `
                    <div class="goblin-name">${goblin.name}</div>
                    <div class="goblin-specialty">${goblin.specialty}</div>
                    <div style="font-size: 12px; color: #99ddff;">${goblin.description}</div>
                `;
                
                gridElement.appendChild(card);
            });
        }
        
        // ğŸš€ ê¸°ìˆ  ë„ê¹¨ë¹„ ì„ íƒ
        function selectTechGoblin(goblin) {
            updateStatus(`ğŸš€ ${goblin.name}ê³¼ ê¸°ìˆ  ì—°êµ¬ë¥¼ ì‹œì‘í•©ë‹ˆë‹¤!`);
            console.log('ì„ íƒëœ ê¸°ìˆ  ë„ê¹¨ë¹„:', goblin);
            
            // ğŸ”¬ ì±„íŒ… ì‹œìŠ¤í…œ ì—´ê¸°
            openChat(goblin);
            
            setTimeout(() => {
                updateStatus(`ğŸ”¬ ${goblin.name}: "${goblin.description}"`);
            }, 1500);
        }

        // ğŸ”¬ ì±„íŒ… ì‹œìŠ¤í…œ ì—´ê¸°
        function openChat(goblin) {
            currentChatGoblin = goblin;
            
            const chatContainer = document.getElementById('chatContainer');
            const chatTitle = document.getElementById('chatTitle');
            const chatMessages = document.getElementById('chatMessages');
            
            chatTitle.textContent = `ğŸ”¬ ${goblin.name}ê³¼ì˜ ê¸°ìˆ  ëŒ€í™”`;
            chatMessages.innerHTML = `
                <div class="message goblin-message">
                    <div class="avatar">ğŸ”¬</div>
                    <div class="text">${goblin.name}: ì•ˆë…•í•˜ì„¸ìš”! ê¸°ìˆ  ë‹¨ì§€ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤. ì–´ë–¤ ê¸°ìˆ ì— ëŒ€í•´ ì´ì•¼ê¸°í•˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”? ğŸš€âœ¨</div>
                </div>
            `;
            
            chatContainer.style.display = 'flex';
            document.getElementById('chatInput').focus();
        }

        // ğŸ”¬ ì±„íŒ… ì‹œìŠ¤í…œ ë‹«ê¸°
        function closeChat() {
            document.getElementById('chatContainer').style.display = 'none';
            currentChatGoblin = null;
        }

        // ğŸ”¬ ì±„íŒ… ì…ë ¥ ì²˜ë¦¬
        function handleChatKeyPress(event) {
            if (event.key === 'Enter') {
                sendChatMessage();
            }
        }

        // ğŸ”¬ ì±„íŒ… ë©”ì‹œì§€ ì „ì†¡
        function sendChatMessage() {
            const chatInput = document.getElementById('chatInput');
            const message = chatInput.value.trim();
            
            if (message && currentChatGoblin) {
                const chatMessages = document.getElementById('chatMessages');
                
                // ì‚¬ìš©ì ë©”ì‹œì§€ ì¶”ê°€
                chatMessages.innerHTML += `
                    <div class="message user-message">
                        <div class="text">${message}</div>
                        <div class="avatar">ğŸ‘¤</div>
                    </div>
                `;
                
                // ë„ê¹¨ë¹„ ì‘ë‹µ ìƒì„±
                const response = generateTechGoblinResponse(currentChatGoblin, message);
                
                setTimeout(() => {
                    chatMessages.innerHTML += `
                        <div class="message goblin-message">
                            <div class="avatar">ğŸ”¬</div>
                            <div class="text">${currentChatGoblin.name}: ${response}</div>
                        </div>
                    `;
                    chatMessages.scrollTop = chatMessages.scrollHeight;
                }, 1000);
                
                chatInput.value = '';
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
        }

        // ğŸ”¬ ê¸°ìˆ  ë„ê¹¨ë¹„ AI ì‘ë‹µ ìƒì„±
        function generateTechGoblinResponse(goblin, userMessage) {
            const message = userMessage.toLowerCase();
            
            // ê¸°ìˆ  ë¶„ì•¼ë³„ ì „ë¬¸ ì‘ë‹µ
            if (goblin.name === 'ì½”ë”©ë§ˆë²•ì‚¬') {
                if (message.includes('ì½”ë”©') || message.includes('í”„ë¡œê·¸ë˜ë°') || message.includes('ê°œë°œ')) {
                    return "í”„ë¡œê·¸ë˜ë°ì€ ë…¼ë¦¬ì  ì‚¬ê³ ì™€ ì°½ì˜ì„±ì˜ ê²°í•©ì…ë‹ˆë‹¤! Python, JavaScript, Java ì¤‘ ì–´ë–¤ ì–¸ì–´ì— ê´€ì‹¬ì´ ìˆìœ¼ì‹ ê°€ìš”? ğŸ’»âœ¨";
                } else if (message.includes('ì•Œê³ ë¦¬ì¦˜') || message.includes('ìë£Œêµ¬ì¡°')) {
                    return "íš¨ìœ¨ì ì¸ ì•Œê³ ë¦¬ì¦˜ì€ ì¢‹ì€ ì†Œí”„íŠ¸ì›¨ì–´ì˜ í•µì‹¬ì…ë‹ˆë‹¤. ì •ë ¬, íƒìƒ‰, ê·¸ë˜í”„ ì•Œê³ ë¦¬ì¦˜ ì¤‘ ì–´ë–¤ ê²ƒì´ ê¶ê¸ˆí•˜ì‹ ê°€ìš”? ğŸ§ ğŸ”";
                } else if (message.includes('ë²„ê·¸') || message.includes('ë””ë²„ê¹…')) {
                    return "ë””ë²„ê¹…ì€ íƒì • ì‘ì—…ê³¼ ê°™ìŠµë‹ˆë‹¤! ë¡œê·¸ë¥¼ í™•ì¸í•˜ê³ , ë‹¨ê³„ë³„ë¡œ ì¶”ì í•˜ë©°, ê°€ì„¤ì„ ì„¸ì›Œë³´ì„¸ìš”. ì–´ë–¤ ë¬¸ì œë¥¼ ê²ªê³  ê³„ì‹ ê°€ìš”? ğŸ•µï¸â€â™‚ï¸ğŸ›";
                }
            } else if (goblin.name === 'AIì—°êµ¬ì›') {
                if (message.includes('ai') || message.includes('ì¸ê³µì§€ëŠ¥') || message.includes('ë¨¸ì‹ ëŸ¬ë‹')) {
                    return "AIëŠ” ì¸ê°„ì˜ ì§€ëŠ¥ì„ ëª¨ë°©í•˜ëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤. ë¨¸ì‹ ëŸ¬ë‹, ë”¥ëŸ¬ë‹, ìì—°ì–´ì²˜ë¦¬ ì¤‘ ì–´ë–¤ ë¶„ì•¼ì— ê´€ì‹¬ì´ ìˆìœ¼ì‹ ê°€ìš”? ğŸ¤–ğŸ§ ";
                } else if (message.includes('ì‹ ê²½ë§') || message.includes('ë”¥ëŸ¬ë‹')) {
                    return "ì‹ ê²½ë§ì€ ì¸ê°„ì˜ ë‡Œë¥¼ ëª¨ë¸ë¡œ í•œ í•™ìŠµ ì•Œê³ ë¦¬ì¦˜ì…ë‹ˆë‹¤. CNN, RNN, Transformer ë“± ë‹¤ì–‘í•œ êµ¬ì¡°ê°€ ìˆì–´ìš”! ğŸ§¬âš¡";
                } else if (message.includes('ë°ì´í„°') || message.includes('í•™ìŠµ')) {
                    return "ë°ì´í„°ëŠ” AIì˜ ì—°ë£Œì…ë‹ˆë‹¤! ì–‘ì§ˆì˜ ë°ì´í„°ì™€ ì ì ˆí•œ ì „ì²˜ë¦¬ê°€ ì„±ê³µì ì¸ AI ëª¨ë¸ì˜ í•µì‹¬ì´ì£ . ğŸ“ŠğŸ”¬";
                }
            } else if (goblin.name === 'ë¡œë´‡ê³µí•™ì') {
                if (message.includes('ë¡œë´‡') || message.includes('ìë™í™”') || message.includes('ê¸°ê³„')) {
                    return "ë¡œë´‡ê³µí•™ì€ ê¸°ê³„, ì „ì, ì†Œí”„íŠ¸ì›¨ì–´ì˜ ìœµí•© ê¸°ìˆ ì…ë‹ˆë‹¤! ì‚°ì—…ìš© ë¡œë´‡ë¶€í„° íœ´ë¨¸ë…¸ì´ë“œê¹Œì§€ ë‹¤ì–‘í•œ ë¶„ì•¼ê°€ ìˆì–´ìš”. ğŸ¤–âš™ï¸";
                } else if (message.includes('ì„¼ì„œ') || message.includes('ì œì–´')) {
                    return "ì„¼ì„œëŠ” ë¡œë´‡ì˜ ê°ê°ê¸°ê´€ì´ê³ , ì œì–´ ì‹œìŠ¤í…œì€ ë‘ë‡Œì…ë‹ˆë‹¤. PID ì œì–´, í”¼ë“œë°± ì‹œìŠ¤í…œì— ëŒ€í•´ ì´ì•¼ê¸°í•´ë³¼ê¹Œìš”? ğŸ“¡ğŸ›ï¸";
                } else if (message.includes('ë¯¸ë˜') || message.includes('ììœ¨ì£¼í–‰')) {
                    return "ììœ¨ì£¼í–‰, ì˜ë£Œ ë¡œë´‡, ê°€ì •ìš© ë¡œë´‡ ë“± ë¡œë´‡ì˜ ë¯¸ë˜ëŠ” ë¬´ê¶ë¬´ì§„í•©ë‹ˆë‹¤! ì–´ë–¤ ë¶„ì•¼ì˜ ë¡œë´‡ì´ ê°€ì¥ ê¸°ëŒ€ë˜ì‹œë‚˜ìš”? ğŸš—ğŸ¥";
                }
            } else if (goblin.name === 'ë°ì´í„°ë¶„ì„ê°€') {
                if (message.includes('ë°ì´í„°') || message.includes('ë¶„ì„') || message.includes('í†µê³„')) {
                    return "ë°ì´í„° ë¶„ì„ì€ ìˆ¨ê²¨ì§„ íŒ¨í„´ì„ ì°¾ëŠ” ë³´ë¬¼ì°¾ê¸°ì…ë‹ˆë‹¤! Python, R, SQL ë“±ìœ¼ë¡œ ë°ì´í„°ë¥¼ íƒí—˜í•´ë³´ì„¸ìš”. ğŸ“ŠğŸ’";
                } else if (message.includes('ì‹œê°í™”') || message.includes('ì°¨íŠ¸')) {
                    return "ë°ì´í„° ì‹œê°í™”ëŠ” ë³µì¡í•œ ì •ë³´ë¥¼ ì§ê´€ì ìœ¼ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤. Matplotlib, Seaborn, D3.jsë¡œ ì•„ë¦„ë‹¤ìš´ ì°¨íŠ¸ë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”! ğŸ“ˆğŸ¨";
                } else if (message.includes('ë¹…ë°ì´í„°') || message.includes('ì˜ˆì¸¡')) {
                    return "ë¹…ë°ì´í„°ëŠ” ë¯¸ë˜ë¥¼ ì˜ˆì¸¡í•˜ëŠ” ìˆ˜ì •êµ¬ìŠ¬ì…ë‹ˆë‹¤! í•˜ë‘¡, ìŠ¤íŒŒí¬ ê°™ì€ ê¸°ìˆ ë¡œ ëŒ€ìš©ëŸ‰ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆì–´ìš”. ğŸ”®ğŸ’»";
                }
            } else if (goblin.name === 'ì‚¬ì´ë²„ë³´ì•ˆ') {
                if (message.includes('ë³´ì•ˆ') || message.includes('í•´í‚¹') || message.includes('ì‚¬ì´ë²„')) {
                    return "ì‚¬ì´ë²„ ë³´ì•ˆì€ ë””ì§€í„¸ ì„¸ìƒì˜ ë°©íŒ¨ì…ë‹ˆë‹¤! ì•”í˜¸í™”, ë°©í™”ë²½, ì¹¨ì… íƒì§€ ì‹œìŠ¤í…œìœ¼ë¡œ ìš°ë¦¬ë¥¼ ë³´í˜¸í•´ìš”. ğŸ›¡ï¸ğŸ”’";
                } else if (message.includes('ì•”í˜¸í™”') || message.includes('ë¹„ë°€ë²ˆí˜¸')) {
                    return "ê°•ë ¥í•œ ì•”í˜¸í™”ëŠ” ì •ë³´ ë³´ì•ˆì˜ í•µì‹¬ì…ë‹ˆë‹¤. AES, RSA ê°™ì€ ì•”í˜¸í™” ì•Œê³ ë¦¬ì¦˜ê³¼ ì•ˆì „í•œ íŒ¨ìŠ¤ì›Œë“œ ê´€ë¦¬ê°€ ì¤‘ìš”í•´ìš”! ğŸ”ğŸ”‘";
                } else if (message.includes('í”¼ì‹±') || message.includes('ì•…ì„±ì½”ë“œ')) {
                    return "ì‚¬ì´ë²„ ê³µê²©ì€ ë‚ ë¡œ ì •êµí•´ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì˜ì‹¬ìŠ¤ëŸ¬ìš´ ì´ë©”ì¼, ì•Œ ìˆ˜ ì—†ëŠ” ë§í¬ëŠ” í”¼í•˜ê³  í•­ìƒ ê²½ê³„ë¥¼ ëŠ¦ì¶”ì§€ ë§ˆì„¸ìš”! âš ï¸ğŸ¦ ";
                }
            } else if (goblin.name === 'ë¸”ë¡ì²´ì¸') {
                if (message.includes('ë¸”ë¡ì²´ì¸') || message.includes('ë¹„íŠ¸ì½”ì¸') || message.includes('ì•”í˜¸í™”í')) {
                    return "ë¸”ë¡ì²´ì¸ì€ íƒˆì¤‘ì•™í™”ëœ ì‹ ë¢° ì‹œìŠ¤í…œì…ë‹ˆë‹¤! ë¹„íŠ¸ì½”ì¸ë¶€í„° ìŠ¤ë§ˆíŠ¸ ê³„ì•½ê¹Œì§€, ê¸ˆìœµì„ í˜ì‹ í•˜ê³  ìˆì–´ìš”. â›“ï¸ğŸ’°";
                } else if (message.includes('ìŠ¤ë§ˆíŠ¸ê³„ì•½') || message.includes('ì´ë”ë¦¬ì›€')) {
                    return "ìŠ¤ë§ˆíŠ¸ ê³„ì•½ì€ ì½”ë“œë¡œ ì‘ì„±ëœ ìë™ ì‹¤í–‰ ê³„ì•½ì…ë‹ˆë‹¤. ì´ë”ë¦¬ì›€ì—ì„œ Solidityë¡œ ê°œë°œí•  ìˆ˜ ìˆì–´ìš”! ğŸ“œâš¡";
                } else if (message.includes('nft') || message.includes('ë””íŒŒì´')) {
                    return "NFTì™€ DeFiëŠ” ë¸”ë¡ì²´ì¸ì˜ ìƒˆë¡œìš´ ì‘ìš© ë¶„ì•¼ì…ë‹ˆë‹¤. ë””ì§€í„¸ ìì‚°ê³¼ íƒˆì¤‘ì•™í™” ê¸ˆìœµì˜ ë¯¸ë˜ë¥¼ ë§Œë“¤ì–´ê°€ê³  ìˆì–´ìš”! ğŸ¨ğŸ’³";
                }
            }
            
            // ì¼ë°˜ì ì¸ ê¸°ìˆ  ì‘ë‹µ
            const generalResponses = [
                `${goblin.name}ì´ ${goblin.description.slice(0, 50)}... ë” ìì„¸íˆ ì•Œê³  ì‹¶ì€ ê²ƒì´ ìˆìœ¼ì‹ ê°€ìš”? ğŸ”¬âœ¨`,
                "ê¸°ìˆ ì˜ ì„¸ê³„ëŠ” ë¹ ë¥´ê²Œ ë³€í™”í•˜ê³  ìˆìŠµë‹ˆë‹¤. í•¨ê»˜ ìµœì‹  íŠ¸ë Œë“œë¥¼ íƒêµ¬í•´ë´…ì‹œë‹¤! ğŸš€ğŸ’¡",
                "í˜ì‹ ì€ í˜¸ê¸°ì‹¬ì—ì„œ ì‹œì‘ë©ë‹ˆë‹¤. ì–´ë–¤ ê¸°ìˆ ì´ ê°€ì¥ í¥ë¯¸ë¡œìš°ì‹ ê°€ìš”? ğŸ¤”ğŸ’­",
                "ì½”ë”©ê³¼ ì°½ì˜ì„±ì˜ ë§Œë‚¨ì´ ìƒˆë¡œìš´ ê°€ëŠ¥ì„±ì„ ì—´ì–´ì¤ë‹ˆë‹¤! ë¬´ì—‡ì„ ë§Œë“¤ì–´ë³´ê³  ì‹¶ìœ¼ì‹ ê°€ìš”? ğŸ’»ğŸ¯",
                "ë¯¸ë˜ëŠ” ìš°ë¦¬ê°€ ì˜¤ëŠ˜ ì‘ì„±í•˜ëŠ” ì½”ë“œë¡œ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤! í•¨ê»˜ ë” ë‚˜ì€ ì„¸ìƒì„ ì½”ë”©í•´ë´…ì‹œë‹¤. ğŸŒŸğŸ’»"
            ];
            
            return generalResponses[Math.floor(Math.random() * generalResponses.length)];
        }
        
        // ğŸ”¬ ê¸°ìˆ  ë‹¨ì§€ í™˜ê²½ ìƒì„±
        function createTechEnvironment() {
            // ğŸ—ï¸ ì—°êµ¬ì†Œ ê±´ë¬¼ë“¤
            for (let i = 0; i < 15; i++) {
                createResearchFacility();
            }
            
            // ğŸ›¸ í”Œë¼ì‰ ë“œë¡ ë“¤
            for (let i = 0; i < 12; i++) {
                createDrone();
            }
            
            // ğŸŒ í™€ë¡œê·¸ë¨ í”Œë«í¼ë“¤
            for (let i = 0; i < 8; i++) {
                createHologramPlatform();
            }
            
            // âš¡ ì—ë„ˆì§€ í•„ë“œ ìƒì„±
            createEnergyField();
        }
        
        // ğŸ—ï¸ ì—°êµ¬ì†Œ ê±´ë¬¼ ìƒì„±
        function createResearchFacility() {
            const facilityGroup = new THREE.Group();
            
            const height = 12 + Math.random() * 15;
            const size = 4 + Math.random() * 3;
            
            // ë©”ì¸ êµ¬ì¡°ë¬¼
            const buildingGeometry = new THREE.CylinderGeometry(size, size * 1.2, height, 8);
            const buildingMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x1a2332,
                transparent: true,
                opacity: 0.8
            });
            const building = new THREE.Mesh(buildingGeometry, buildingMaterial);
            building.position.y = height / 2;
            facilityGroup.add(building);
            
            // í™€ë¡œê·¸ë¨ ë§ë“¤
            for (let ring = 0; ring < 3; ring++) {
                const ringGeometry = new THREE.RingGeometry(size + 0.5, size + 1, 16);
                const ringMaterial = new THREE.MeshBasicMaterial({ 
                    color: 0x00ffff,
                    transparent: true,
                    opacity: 0.4,
                    side: THREE.DoubleSide
                });
                const ringMesh = new THREE.Mesh(ringGeometry, ringMaterial);
                ringMesh.rotation.x = -Math.PI / 2;
                ringMesh.position.y = (ring + 1) * height / 4;
                facilityGroup.add(ringMesh);
                
                gsap.to(ringMesh.rotation, {
                    z: Math.PI * 2,
                    duration: 6 + ring,
                    repeat: -1,
                    ease: "none"
                });
            }
            
            // ì—ë„ˆì§€ ì½”ì–´
            const coreGeometry = new THREE.SphereGeometry(0.8);
            const coreMaterial = new THREE.MeshBasicMaterial({ 
                color: 0x00ffff,
                transparent: true,
                opacity: 0.6
            });
            const core = new THREE.Mesh(coreGeometry, coreMaterial);
            core.position.y = height + 1;
            facilityGroup.add(core);
            
            gsap.to(core.material, {
                opacity: 0.2,
                duration: 2,
                repeat: -1,
                yoyo: true,
                ease: "sine.inOut"
            });
            
            const x = (Math.random() - 0.5) * 80;
            const z = (Math.random() - 0.5) * 80;
            facilityGroup.position.set(x, 0, z);
            
            scene.add(facilityGroup);
        }
        
        // ğŸ›¸ ë“œë¡  ìƒì„±
        function createDrone() {
            const droneGroup = new THREE.Group();
            
            const bodyGeometry = new THREE.SphereGeometry(0.5, 8, 6);
            const bodyMaterial = new THREE.MeshPhongMaterial({ 
                color: 0x0099cc,
                emissive: 0x003366,
                emissiveIntensity: 0.3
            });
            const body = new THREE.Mesh(bodyGeometry, bodyMaterial);
            droneGroup.add(body);
            
            // í”„ë¡œí ëŸ¬ë“¤
            for (let i = 0; i < 4; i++) {
                const propGeometry = new THREE.CylinderGeometry(0.02, 0.02, 0.3);
                const propMaterial = new THREE.MeshBasicMaterial({ color: 0x00ffff });
                const prop = new THREE.Mesh(propGeometry, propMaterial);
                
                const angle = (i / 4) * Math.PI * 2;
                prop.position.set(Math.cos(angle) * 0.8, 0, Math.sin(angle) * 0.8);
                droneGroup.add(prop);
                
                gsap.to(prop.rotation, {
                    y: Math.PI * 2,
                    duration: 0.1,
                    repeat: -1,
                    ease: "none"
                });
            }
            
            const x = (Math.random() - 0.5) * 60;
            const y = 8 + Math.random() * 12;
            const z = (Math.random() - 0.5) * 60;
            droneGroup.position.set(x, y, z);
            
            // ììœ  ë¹„í–‰ íŒ¨í„´
            gsap.to(droneGroup.position, {
                x: x + (Math.random() - 0.5) * 30,
                y: y + (Math.random() - 0.5) * 8,
                z: z + (Math.random() - 0.5) * 30,
                duration: 8 + Math.random() * 4,
                repeat: -1,
                yoyo: true,
                ease: "sine.inOut"
            });
            
            scene.add(droneGroup);
        }
        
        // ğŸŒ í™€ë¡œê·¸ë¨ í”Œë«í¼ ìƒì„±
        function createHologramPlatform() {
            const platformGroup = new THREE.Group();
            
            const platformGeometry = new THREE.CylinderGeometry(3, 3, 0.2);
            const platformMaterial = new THREE.MeshBasicMaterial({ 
                color: 0x0066cc,
                transparent: true,
                opacity: 0.5
            });
            const platform = new THREE.Mesh(platformGeometry, platformMaterial);
            platformGroup.add(platform);
            
            // í™€ë¡œê·¸ë¨ ê¸°ë‘¥ë“¤
            for (let i = 0; i < 8; i++) {
                const pillarGeometry = new THREE.CylinderGeometry(0.1, 0.1, 4);
                const pillarMaterial = new THREE.MeshBasicMaterial({ 
                    color: 0x00ffff,
                    transparent: true,
                    opacity: 0.6
                });
                const pillar = new THREE.Mesh(pillarGeometry, pillarMaterial);
                
                const angle = (i / 8) * Math.PI * 2;
                pillar.position.set(Math.cos(angle) * 2.5, 2, Math.sin(angle) * 2.5);
                platformGroup.add(pillar);
            }
            
            const x = (Math.random() - 0.5) * 70;
            const z = (Math.random() - 0.5) * 70;
            platformGroup.position.set(x, 0, z);
            
            gsap.to(platformGroup.rotation, {
                y: Math.PI * 2,
                duration: 12,
                repeat: -1,
                ease: "none"
            });
            
            scene.add(platformGroup);
        }
        
        // âš¡ ì—ë„ˆì§€ í•„ë“œ ìƒì„±
        function createEnergyField() {
            const ambientLight = new THREE.AmbientLight(0x003366, 0.3);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0x00ffff, 0.8);
            directionalLight.position.set(15, 25, 15);
            directionalLight.castShadow = true;
            scene.add(directionalLight);
            
            // í™€ë¡œê·¸ë¨ ì¡°ëª…ë“¤
            for (let i = 0; i < 8; i++) {
                const holoLight = new THREE.PointLight(0x00ffff, 1, 25);
                holoLight.position.set(
                    (Math.random() - 0.5) * 50,
                    8 + Math.random() * 15,
                    (Math.random() - 0.5) * 50
                );
                scene.add(holoLight);
                
                // ê¹œë¹¡ì´ëŠ” íš¨ê³¼
                gsap.to(holoLight, {
                    intensity: 0.2,
                    duration: 1 + Math.random(),
                    repeat: -1,
                    yoyo: true,
                    ease: "sine.inOut"
                });
            }
        }
        
        // ğŸ”¬ ê¸°ìˆ  ë‹¨ì§€ ì´ˆê¸°í™”
        function initTechDistrict() {
            console.log('ğŸ”¬ ê¸°ìˆ  ë‹¨ì§€ ì´ˆê¸°í™” ì‹œì‘...');
            
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x0a0a1a);
            
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 20, 30);
            
            const canvas = document.getElementById('tech-canvas');
            renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            
            // ğŸ”¬ ê¸°ìˆ  ë‹¨ì§€ í™˜ê²½ ìƒì„±
            createTechEnvironment();
            
            // ğŸš€ 3D ê¸°ìˆ  ë„ê¹¨ë¹„ë“¤ ìƒì„±
            createTech3DGoblins();
            
            // ğŸš€ ê¸°ìˆ  ë„ê¹¨ë¹„ ì¹´ë“œ ìƒì„±
            createTechGoblinCards();
            
            // ğŸ–±ï¸ ìº”ë²„ìŠ¤ í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€
            canvas.addEventListener('click', onTechCanvasClick);
            
            isSystemReady = true;
            updateStatus('ğŸ”¬ ê¸°ìˆ  ë‹¨ì§€ê°€ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤! ë¯¸ë˜ ê¸°ìˆ ì„ íƒí—˜í•˜ì„¸ìš”!');
            
            animate();
        }
        
        // ğŸ¬ ì• ë‹ˆë©”ì´ì…˜ ë£¨í”„
        function animate() {
            requestAnimationFrame(animate);
            
            if (controls) {
                controls.update();
            }
            
            if (avatar && controls) {
                controls.target.copy(avatar.position);
                controls.target.y += 1;
            }
            
            // ğŸ·ï¸ ëª¨ë“  ì´ë¦„í‘œë“¤ì´ ì¹´ë©”ë¼ë¥¼ ë°”ë¼ë³´ë„ë¡ ì—…ë°ì´íŠ¸
            scene.traverse((object) => {
                if (object.userData && object.userData.isNameTag && camera) {
                    object.lookAt(camera.position);
                }
            });
            
            if (renderer && scene && camera) {
                renderer.render(scene, camera);
            }
        }
        
        // ğŸ“± ìœˆë„ìš° ë¦¬ì‚¬ì´ì¦ˆ ì²˜ë¦¬
        window.addEventListener('resize', () => {
            if (camera && renderer) {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            }
        });
        
        // ğŸš€ ê¸°ìˆ  ë‹¨ì§€ ì‹œì‘
        window.addEventListener('load', () => {
            initTechDistrict();
        });
    </script>
</body>
</html>
