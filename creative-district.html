<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ¨ ì°½ì‘ êµ¬ì—­ - ë„ê¹¨ë¹„ ë©”íƒ€ë²„ìŠ¤</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #8e44ad 0%, #e74c3c 30%, #f39c12 60%, #27ae60 100%);
            color: white;
            overflow: hidden;
        }
        
        #creative-canvas {
            display: block;
            width: 100vw;
            height: 100vh;
            cursor: crosshair;
        }
        
        /* ë©”ì¸ UI ì»¨í…Œì´ë„ˆ */
        .ui-container {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1000;
            pointer-events: none;
        }
        
        .ui-container > * {
            pointer-events: auto;
        }
        
        /* ìƒíƒœ í‘œì‹œ */
        .status-display {
            background: rgba(142, 68, 173, 0.9);
            border: 2px solid #ff6b9d;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            font-size: 14px;
            backdrop-filter: blur(10px);
            box-shadow: 0 5px 15px rgba(255, 107, 157, 0.3);
        }
        
        /* ì»¨íŠ¸ë¡¤ íŒ¨ë„ */
        .control-panel {
            background: rgba(142, 68, 173, 0.95);
            border: 2px solid #ff6b9d;
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 5px 20px rgba(255, 107, 157, 0.4);
            min-width: 300px;
        }
        
        .control-btn {
            background: linear-gradient(135deg, #ff6b9d 0%, #e91e63 100%);
            border: none;
            border-radius: 8px;
            color: white;
            padding: 12px 16px;
            margin: 5px;
            cursor: pointer;
            font-size: 13px;
            font-weight: 600;
            transition: all 0.3s ease;
            width: 100%;
            text-align: center;
        }
        
        .control-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 157, 0.4);
        }
        
        /* ë’¤ë¡œê°€ê¸° ë²„íŠ¼ */
        .back-btn {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1001;
            border: none;
            border-radius: 10px;
            color: white;
            padding: 15px 20px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        
        .back-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 107, 107, 0.4);
        }
        
        /* ì°½ì‘ ë„ê¹¨ë¹„ ì¹´ë“œ */
        .creative-goblin-card {
            background: rgba(142, 68, 173, 0.9);
            border: 2px solid #ff6b9d;
            border-radius: 15px;
            padding: 15px;
            margin: 10px 0;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }
        
        .creative-goblin-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(255, 107, 157, 0.3);
            border-color: #ff9fbf;
        }
        
        .goblin-name {
            font-size: 18px;
            font-weight: bold;
            color: #ff6b9d;
            margin-bottom: 8px;
        }
        
        .goblin-specialty {
            font-size: 14px;
            color: #ffb3d9;
            margin-bottom: 5px;
        }
        
        /* AI ì±„íŒ… ì‹œìŠ¤í…œ */
        .chat-container {
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 400px;
            height: 300px;
            background: rgba(155, 89, 182, 0.95);
            border: 2px solid #ff6b9d;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            z-index: 1002;
            display: none;
            flex-direction: column;
        }
        
        .chat-header {
            background: linear-gradient(135deg, #ff6b9d 0%, #e84393 100%);
            color: white;
            padding: 15px;
            border-radius: 13px 13px 0 0;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .chat-close {
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            padding: 0;
            width: 25px;
            height: 25px;
        }
        
        .chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
            max-height: 200px;
        }
        
        .chat-message {
            margin-bottom: 10px;
            padding: 8px 12px;
            border-radius: 10px;
            max-width: 80%;
        }
        
        .user-message {
            background: #e84393;
            color: white;
            margin-left: auto;
        }
        
        .ai-message {
            background: rgba(255, 107, 157, 0.3);
            color: #ff6b9d;
            border: 1px solid #ff6b9d;
        }
        
        .chat-input-container {
            padding: 15px;
            border-top: 1px solid #ff6b9d;
        }
        
        .chat-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #ff6b9d;
            border-radius: 8px;
            background: rgba(255, 107, 157, 0.1);
            color: white;
            font-size: 14px;
        }
        
        .chat-input::placeholder {
            color: #ffb3d9;
        }
        
        .chat-input:focus {
            outline: none;
            border-color: #e84393;
            box-shadow: 0 0 10px rgba(255, 107, 157, 0.3);
        }
    </style>
</head>
<body>
    <!-- ë’¤ë¡œê°€ê¸° ë²„íŠ¼ -->
    <button class="back-btn" onclick="goBackToVillage()">â† ğŸ˜ï¸ ë„ê¹¨ë¹„ ë§ˆì„ë¡œ</button>
    
    <!-- ë©”ì¸ ìº”ë²„ìŠ¤ -->
    <canvas id="creative-canvas"></canvas>
    
    <!-- UI ì»¨í…Œì´ë„ˆ -->
    <div class="ui-container">
        <!-- ìƒíƒœ í‘œì‹œ -->
        <div class="status-display" id="statusDisplay">
            ğŸ¨ ì°½ì‘ êµ¬ì—­ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!
        </div>
        
        <!-- ì»¨íŠ¸ë¡¤ íŒ¨ë„ -->
        <div class="control-panel">
            <h2 style="color: #ff6b9d; margin-bottom: 15px; text-align: center;">ğŸ¨ ì°½ì‘ êµ¬ì—­</h2>
            
            <div style="margin-bottom: 20px;">
                <h3 style="color: #ff6b9d; margin-bottom: 10px; font-size: 16px;">ğŸ® ì»¨íŠ¸ë¡¤</h3>
                <button class="control-btn" onclick="toggleAvatar()">ğŸ­ ì•„í‹°ìŠ¤íŠ¸ ì•„ë°”íƒ€</button>
                <button class="control-btn" onclick="resetCamera()">ğŸ“· ì¹´ë©”ë¼ ë¦¬ì…‹</button>
                <button class="control-btn" onclick="togglePalette()">ğŸŒˆ ìƒ‰ìƒ íŒ”ë ˆíŠ¸</button>
            </div>
            
            <div style="margin-bottom: 20px;">
                <h3 style="color: #ff6b9d; margin-bottom: 10px; font-size: 16px;">ğŸ¨ ì°½ì‘ ë„ê¹¨ë¹„ë“¤</h3>
                <div id="creativeGoblinGrid">
                    <!-- ì°½ì‘ ë„ê¹¨ë¹„ë“¤ì´ ì—¬ê¸°ì— ìƒì„±ë©ë‹ˆë‹¤ -->
                </div>
            </div>
        </div>
    </div>
    
    <!-- AI ì±„íŒ… ì‹œìŠ¤í…œ -->
    <div class="chat-container" id="chatContainer">
        <div class="chat-header">
            <span id="chatTitle">ğŸ¨ ë§ˆìŠ¤í„° í™”ê°€ì™€ ëŒ€í™”</span>
            <button class="chat-close" onclick="closeChat()">Ã—</button>
        </div>
        <div class="chat-messages" id="chatMessages">
            <!-- ì±„íŒ… ë©”ì‹œì§€ë“¤ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
        </div>
        <div class="chat-input-container">
            <input type="text" class="chat-input" id="chatInput" placeholder="ì°½ì‘ ë„ê¹¨ë¹„ì—ê²Œ ì˜ˆìˆ ì  ì˜ê°ì„ êµ¬í•´ë³´ì„¸ìš”..." onkeypress="handleChatKeyPress(event)">
        </div>
    </div>
    
    <!-- Three.js ë° GSAP ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    
    <script>
        // ğŸ¨ ì°½ì‘ êµ¬ì—­ ì „ì—­ ë³€ìˆ˜
        let scene, camera, renderer, controls;
        let avatar = null;
        let isSystemReady = false;
        
        // ğŸ¨ ì°½ì‘ ì „ë¬¸ ë„ê¹¨ë¹„ë“¤
        const creativeGoblins = [
            { name: 'ğŸ¨ ë§ˆìŠ¤í„° í™”ê°€', specialty: 'íšŒí™”', description: 'ëª¨ë“  ê°ì •ì„ ìº”ë²„ìŠ¤ì— ë‹´ì•„ë‚´ëŠ” ì˜ˆìˆ  ë„ê¹¨ë¹„', emoji: 'ğŸ¨', color: 0xff6b9d },
            { name: 'ğŸµ ìŒì•…ë§ˆì—ìŠ¤íŠ¸ë¡œ', specialty: 'ì‘ê³¡', description: 'ë§ˆìŒì„ ìš¸ë¦¬ëŠ” ì„ ìœ¨ì„ ë§Œë“¤ì–´ë‚´ëŠ” ë„ê¹¨ë¹„', emoji: 'ğŸµ', color: 0x9b59b6 },
            { name: 'âœï¸ ìŠ¤í† ë¦¬í…”ëŸ¬', specialty: 'ë¬¸í•™', description: 'ê°ë™ì ì¸ ì´ì•¼ê¸°ë¥¼ ì—®ì–´ë‚´ëŠ” ë¬¸í•™ ë„ê¹¨ë¹„', emoji: 'âœï¸', color: 0x3498db },
            { name: 'ğŸ¬ ì˜í™”ê°ë…', specialty: 'ì˜ìƒ', description: 'ê¿ˆê°™ì€ ì˜ìƒì„ ì°½ì¡°í•˜ëŠ” ë¹„ì£¼ì–¼ ë„ê¹¨ë¹„', emoji: 'ğŸ¬', color: 0xe74c3c },
            { name: 'ğŸº ì¡°ê°ê°€', specialty: 'ì¡°ê°', description: 'ëŒê³¼ í™ì— ìƒëª…ì„ ë¶ˆì–´ë„£ëŠ” ì¡°í˜• ë„ê¹¨ë¹„', emoji: 'ğŸº', color: 0xf39c12 },
            { name: 'ğŸ’ƒ ë¬´ìš©ê°€', specialty: 'ëŒ„ìŠ¤', description: 'ëª¸ì§“ìœ¼ë¡œ ì˜ˆìˆ ì„ í‘œí˜„í•˜ëŠ” ë¬´ìš© ë„ê¹¨ë¹„', emoji: 'ğŸ’ƒ', color: 0x27ae60 }
        ];
        
        // ğŸ¯ ìƒíƒœ ì—…ë°ì´íŠ¸ í•¨ìˆ˜
        function updateStatus(message) {
            const statusElement = document.getElementById('statusDisplay');
            if (statusElement) {
                statusElement.textContent = message;
            }
        }
        
        // ğŸ”™ ë„ê¹¨ë¹„ ë§ˆì„ë¡œ ëŒì•„ê°€ê¸°
        function goBackToVillage() {
            updateStatus('ğŸ˜ï¸ ë„ê¹¨ë¹„ ë§ˆì„ë¡œ ëŒì•„ê°€ëŠ” ì¤‘...');
            // GitHub Pagesìš© ë² ì´ìŠ¤ URL ê³„ì‚°
            const baseURL = window.location.origin + window.location.pathname.replace(/\/[^\/]*$/, '/');
            setTimeout(() => {
                window.location.href = baseURL + 'index.html';
            }, 1000);
        }
        
        // ğŸ® ì•„ë°”íƒ€ í† ê¸€
        function toggleAvatar() {
            if (!avatar) {
                createAvatar();
            } else {
                removeAvatar();
            }
        }
        
        // ğŸ­ ì•„í‹°ìŠ¤íŠ¸ ì•„ë°”íƒ€ ìƒì„±
        function createAvatar() {
            avatar = new THREE.Group();
            
            // ì•„í‹°ìŠ¤íŠ¸ ëª¸ì²´ (ì›í†µí˜•, í™”ë ¤í•œ ì˜·)
            const bodyGeometry = new THREE.CylinderGeometry(0.4, 0.5, 1.8);
            const bodyMaterial = new THREE.MeshPhongMaterial({ 
                color: 0xff6b9d,
                shininess: 50
            });
            const body = new THREE.Mesh(bodyGeometry, bodyMaterial);
            body.position.y = 1;
            avatar.add(body);
            
            // ì•„í‹°ìŠ¤íŠ¸ ë¨¸ë¦¬
            const headGeometry = new THREE.SphereGeometry(0.5);
            const headMaterial = new THREE.MeshPhongMaterial({ color: 0xf4d1ae });
            const head = new THREE.Mesh(headGeometry, headMaterial);
            head.position.y = 2.5;
            avatar.add(head);
            
            // ë² ë ˆëª¨ (ì˜ˆìˆ ê°€ ëª¨ì)
            const beretGeometry = new THREE.CylinderGeometry(0.6, 0.6, 0.2);
            const beretMaterial = new THREE.MeshPhongMaterial({ color: 0x2c3e50 });
            const beret = new THREE.Mesh(beretGeometry, beretMaterial);
            beret.position.y = 3.2;
            beret.rotation.z = 0.3;
            avatar.add(beret);
            
            // íŒ”ë ˆíŠ¸ (ì™¼ì†)
            const paletteGeometry = new THREE.CylinderGeometry(0.3, 0.3, 0.1);
            const paletteMaterial = new THREE.MeshPhongMaterial({ color: 0xffffff });
            const palette = new THREE.Mesh(paletteGeometry, paletteMaterial);
            palette.position.set(-0.8, 1.5, 0);
            palette.rotation.z = Math.PI / 2;
            avatar.add(palette);
            
            // ë¶“ (ì˜¤ë¥¸ì†)
            const brushGeometry = new THREE.CylinderGeometry(0.02, 0.02, 0.8);
            const brushMaterial = new THREE.MeshPhongMaterial({ color: 0x8b4513 });
            const brush = new THREE.Mesh(brushGeometry, brushMaterial);
            brush.position.set(0.8, 1.8, 0);
            brush.rotation.z = -0.5;
            avatar.add(brush);
            
            // ì°½ì‘ ì˜¤ë¼ (ë¬´ì§€ê°œ ìƒ‰ìƒ)
            for (let i = 0; i < 5; i++) {
                const auraGeometry = new THREE.RingGeometry(0.8 + i * 0.2, 1.2 + i * 0.2, 16);
                const rainbowColors = [0xff0000, 0xff8800, 0xffff00, 0x00ff00, 0x0088ff, 0x8800ff];
                const auraMaterial = new THREE.MeshBasicMaterial({ 
                    color: rainbowColors[i % rainbowColors.length],
                    transparent: true,
                    opacity: 0.3,
                    side: THREE.DoubleSide
                });
                const aura = new THREE.Mesh(auraGeometry, auraMaterial);
                aura.rotation.x = -Math.PI / 2;
                aura.position.y = 0.1;
                avatar.add(aura);
                
                gsap.to(aura.rotation, {
                    z: Math.PI * 2,
                    duration: 4 - i * 0.5,
                    repeat: -1,
                    ease: "none"
                });
            }
            
            avatar.position.set(0, 0, 0);
            scene.add(avatar);
            
            if (camera && controls) {
                gsap.to(camera.position, {
                    x: 5, y: 8, z: 12,
                    duration: 1.5,
                    ease: "power2.out"
                });
                gsap.to(controls.target, {
                    x: 0, y: 1, z: 0,
                    duration: 1.5,
                    ease: "power2.out",
                    onUpdate: () => controls.update()
                });
            }
            
            updateStatus('ğŸ­ ì•„í‹°ìŠ¤íŠ¸ ì•„ë°”íƒ€ê°€ ì°½ì‘ ëª¨ë“œë¡œ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤!');
        }
        
        // ğŸ­ ì•„ë°”íƒ€ ì œê±°
        function removeAvatar() {
            if (avatar) {
                while(avatar.children.length > 0) {
                    const child = avatar.children[0];
                    avatar.remove(child);
                    if (child.geometry) child.geometry.dispose();
                    if (child.material) child.material.dispose();
                }
                scene.remove(avatar);
                avatar = null;
                updateStatus('ğŸ‘‹ ì•„í‹°ìŠ¤íŠ¸ ì•„ë°”íƒ€ê°€ ì‘ì—…ì„ ë§ˆì³¤ìŠµë‹ˆë‹¤');
            }
        }
        
        // ğŸ“· ì¹´ë©”ë¼ ë¦¬ì…‹
        function resetCamera() {
            if (camera && controls) {
                gsap.to(camera.position, {
                    x: 0, y: 18, z: 28,
                    duration: 1.5,
                    ease: "power2.out"
                });
                gsap.to(controls.target, {
                    x: 0, y: 0, z: 0,
                    duration: 1.5,
                    ease: "power2.out",
                    onUpdate: () => controls.update()
                });
                updateStatus('ğŸ“· ì¹´ë©”ë¼ê°€ ì°½ì‘ êµ¬ì—­ ì¤‘ì‹¬ìœ¼ë¡œ ë¦¬ì…‹ë˜ì—ˆìŠµë‹ˆë‹¤');
            }
        }
        
        // ğŸŒˆ ìƒ‰ìƒ íŒ”ë ˆíŠ¸ í† ê¸€
        function togglePalette() {
            const palettes = ['ğŸŒˆ ë¬´ì§€ê°œ', 'ğŸ”¥ ë¶ˆê½ƒ', 'ğŸŒŠ ë°”ë‹¤', 'ğŸŒ¸ ë´„ê½ƒ', 'ğŸ‚ ê°€ì„'];
            const randomPalette = palettes[Math.floor(Math.random() * palettes.length)];
            updateStatus(`ğŸ¨ ì°½ì‘ êµ¬ì—­ì´ ${randomPalette} íŒ”ë ˆíŠ¸ë¡œ ë³€í™˜ë˜ì—ˆìŠµë‹ˆë‹¤`);
        }
        
        // ğŸ·ï¸ ì°½ì‘ ë„ê¹¨ë¹„ ì´ë¦„í‘œ ìƒì„±
        function createCreativeGoblinNameTag(name, specialty) {
            const canvas = document.createElement('canvas');
            const context = canvas.getContext('2d');
            canvas.width = 512;
            canvas.height = 256;
            
            // ì˜ˆìˆ ì  ê·¸ë¼ë””ì–¸íŠ¸ ë°°ê²½
            const gradient = context.createRadialGradient(256, 128, 0, 256, 128, 300);
            gradient.addColorStop(0, 'rgba(142, 68, 173, 0.9)');
            gradient.addColorStop(0.7, 'rgba(231, 76, 60, 0.7)');
            gradient.addColorStop(1, 'rgba(243, 156, 18, 0.9)');
            context.fillStyle = gradient;
            context.fillRect(0, 0, canvas.width, canvas.height);
            
            // ì•„íŠ¸ ë¸ŒëŸ¬ì‹œ í…Œë‘ë¦¬
            context.strokeStyle = '#ff6b9d';
            context.lineWidth = 8;
            context.setLineDash([20, 10]);
            context.strokeRect(4, 4, canvas.width - 8, canvas.height - 8);
            
            // ì´ë¦„ í…ìŠ¤íŠ¸ (ì˜ˆìˆ ì  í°íŠ¸)
            context.shadowColor = '#ff6b9d';
            context.shadowBlur = 15;
            context.fillStyle = '#ff6b9d';
            context.font = 'bold 44px Arial';
            context.textAlign = 'center';
            context.fillText(name, canvas.width / 2, 80);
            
            // ì „ë¬¸ ë¶„ì•¼ í…ìŠ¤íŠ¸
            context.shadowBlur = 8;
            context.fillStyle = '#ffb3d9';
            context.font = '30px Arial';
            context.fillText(specialty, canvas.width / 2, 130);
            
            // ì˜ˆìˆ ì  ë¶“í„°ì¹˜ë“¤
            context.setLineDash([]);
            context.strokeStyle = '#ff9fbf';
            context.lineWidth = 3;
            for (let i = 0; i < 5; i++) {
                context.beginPath();
                context.moveTo(40 + i * 80, 160);
                context.bezierCurveTo(
                    60 + i * 80, 140,
                    80 + i * 80, 180,
                    100 + i * 80, 160
                );
                context.stroke();
            }
            
            // ì»¬ëŸ¬ ë„íŠ¸ë“¤
            const colors = ['#ff6b9d', '#9b59b6', '#3498db', '#e74c3c', '#f39c12', '#27ae60'];
            for (let i = 0; i < 6; i++) {
                context.fillStyle = colors[i];
                context.beginPath();
                context.arc(70 + i * 70, 200, 12, 0, Math.PI * 2);
                context.fill();
            }
            
            const texture = new THREE.CanvasTexture(canvas);
            texture.needsUpdate = true;
            
            const planeGeometry = new THREE.PlaneGeometry(4, 2);
            const planeMaterial = new THREE.MeshBasicMaterial({ 
                map: texture, 
                transparent: true,
                side: THREE.DoubleSide
            });
            
            const nameTagMesh = new THREE.Mesh(planeGeometry, planeMaterial);
            nameTagMesh.userData.isNameTag = true;
            
            return nameTagMesh;
        }
        
        // ğŸ¨ 3D ì°½ì‘ ë„ê¹¨ë¹„ë“¤ ìƒì„±
        function createCreative3DGoblins() {
            creativeGoblins.forEach((goblin, index) => {
                const goblin3D = createCreative3DGoblin(goblin, index);
                scene.add(goblin3D);
            });
        }
        
        // ğŸ¨ ê°œë³„ 3D ì°½ì‘ ë„ê¹¨ë¹„ ìƒì„±
        function createCreative3DGoblin(goblinData, index) {
            const goblinGroup = new THREE.Group();
            
            // ì˜ˆìˆ ì  ëª¸ì²´ (ë‹¤ì´ì•„ëª¬ë“œ í˜•íƒœ)
            const bodyGeometry = new THREE.OctahedronGeometry(1.2);
            const bodyMaterial = new THREE.MeshPhongMaterial({ 
                color: goblinData.color,
                shininess: 80,
                transparent: true,
                opacity: 0.85
            });
            const body = new THREE.Mesh(bodyGeometry, bodyMaterial);
            body.position.y = 1.5;
            goblinGroup.add(body);
            
            // ì•„í‹°ìŠ¤íŠ¸ ë¨¸ë¦¬
            const headGeometry = new THREE.SphereGeometry(0.8);
            const headMaterial = new THREE.MeshPhongMaterial({ color: 0xf4d1ae });
            const head = new THREE.Mesh(headGeometry, headMaterial);
            head.position.y = 3;
            goblinGroup.add(head);
            
            // ì°½ì‘ ë„êµ¬ë“¤ (ë¶„ì•¼ë³„ë¡œ ë‹¤ë¦„)
            const toolGeometry = new THREE.BoxGeometry(0.2, 1, 0.2);
            const toolMaterial = new THREE.MeshPhongMaterial({ color: 0x8b4513 });
            const tool = new THREE.Mesh(toolGeometry, toolMaterial);
            tool.position.set(1, 2, 0);
            tool.rotation.z = -0.5;
            goblinGroup.add(tool);
            
            // ë² ë ˆëª¨
            const beretGeometry = new THREE.CylinderGeometry(0.7, 0.7, 0.2);
            const beretMaterial = new THREE.MeshPhongMaterial({ color: 0x2c3e50 });
            const beret = new THREE.Mesh(beretGeometry, beretMaterial);
            beret.position.y = 3.7;
            beret.rotation.z = 0.3;
            goblinGroup.add(beret);
            
            // ì°½ì‘ ì˜ê° íŒŒí‹°í´ë“¤
            for (let i = 0; i < 8; i++) {
                const particleGeometry = new THREE.SphereGeometry(0.1);
                const particleColors = [0xff6b9d, 0x9b59b6, 0x3498db, 0xe74c3c, 0xf39c12, 0x27ae60];
                const particleMaterial = new THREE.MeshBasicMaterial({ 
                    color: particleColors[i % particleColors.length],
                    transparent: true,
                    opacity: 0.7
                });
                const particle = new THREE.Mesh(particleGeometry, particleMaterial);
                
                const angle = (i / 8) * Math.PI * 2;
                const radius = 1.5 + Math.sin(i) * 0.5;
                particle.position.set(
                    Math.cos(angle) * radius,
                    3 + Math.sin(i) * 0.3,
                    Math.sin(angle) * radius
                );
                goblinGroup.add(particle);
                
                // íŒŒí‹°í´ ì• ë‹ˆë©”ì´ì…˜
                gsap.to(particle.position, {
                    y: particle.position.y + 1,
                    duration: 2 + i * 0.2,
                    repeat: -1,
                    yoyo: true,
                    ease: "sine.inOut"
                });
                
                gsap.to(particle.rotation, {
                    z: Math.PI * 2,
                    duration: 3 + i * 0.3,
                    repeat: -1,
                    ease: "none"
                });
            }
            
            // ì´ë¦„í‘œ ì¶”ê°€
            const nameTag = createCreativeGoblinNameTag(goblinData.name, goblinData.specialty);
            nameTag.position.set(0, 5.5, 0);
            goblinGroup.add(nameTag);
            
            // ìœ„ì¹˜ ì„¤ì • (ì›í˜• ë°°ì¹˜)
            const angle = (index / creativeGoblins.length) * Math.PI * 2;
            const radius = 20;
            const x = Math.cos(angle) * radius;
            const z = Math.sin(angle) * radius;
            goblinGroup.position.set(x, 0, z);
            
            goblinGroup.lookAt(0, 1, 0);
            
            goblinGroup.userData = {
                goblinData: goblinData,
                index: index,
                isCreativeGoblin: true
            };
            
            // ì˜ˆìˆ ì  ì• ë‹ˆë©”ì´ì…˜
            gsap.to(goblinGroup.position, {
                y: Math.sin(index * 1.5) * 0.6,
                duration: 4 + index * 0.3,
                repeat: -1,
                yoyo: true,
                ease: "sine.inOut"
            });
            
            // ëª¸ì²´ íšŒì „
            gsap.to(body.rotation, {
                y: Math.PI * 2,
                duration: 10 + index,
                repeat: -1,
                ease: "none"
            });
            
            return goblinGroup;
        }
        
        // ğŸ¨ ì°½ì‘ ë„ê¹¨ë¹„ í´ë¦­ ì²˜ë¦¬
        function onCreativeCanvasClick(event) {
            if (!camera || !scene) return;
            
            const rect = renderer.domElement.getBoundingClientRect();
            const mouse = new THREE.Vector2();
            mouse.x = ((event.clientX - rect.left) / rect.width) * 2 - 1;
            mouse.y = -((event.clientY - rect.top) / rect.height) * 2 + 1;
            
            const raycaster = new THREE.Raycaster();
            raycaster.setFromCamera(mouse, camera);
            
            const intersects = raycaster.intersectObjects(scene.children, true);
            
            if (intersects.length > 0) {
                let clickedObject = intersects[0].object;
                
                while (clickedObject && !clickedObject.userData.isCreativeGoblin) {
                    clickedObject = clickedObject.parent;
                }
                
                if (clickedObject && clickedObject.userData.isCreativeGoblin) {
                    const goblinData = clickedObject.userData.goblinData;
                    selectCreativeGoblin(goblinData);
                    
                    gsap.to(clickedObject.scale, {
                        x: 1.3, y: 1.3, z: 1.3,
                        duration: 0.2,
                        yoyo: true,
                        repeat: 1,
                        ease: "power2.out"
                    });
                }
            }
        }
        
        // ğŸ¨ ì°½ì‘ ë„ê¹¨ë¹„ ì¹´ë“œ ìƒì„±
        function createCreativeGoblinCards() {
            const gridElement = document.getElementById('creativeGoblinGrid');
            
            creativeGoblins.forEach((goblin, index) => {
                const card = document.createElement('div');
                card.className = 'creative-goblin-card';
                card.onclick = () => selectCreativeGoblin(goblin);
                
                card.innerHTML = `
                    <div class="goblin-name">${goblin.name}</div>
                    <div class="goblin-specialty">${goblin.specialty}</div>
                    <div style="font-size: 12px; color: #ffd9ec;">${goblin.description}</div>
                `;
                
                gridElement.appendChild(card);
            });
        }
        
        // ğŸ¨ ì°½ì‘ ë„ê¹¨ë¹„ ì„ íƒ
        function selectCreativeGoblin(goblin) {
            updateStatus(`ğŸ¨ ${goblin.name}ê³¼ ì°½ì‘ í˜‘ì—…ì„ ì‹œì‘í•©ë‹ˆë‹¤!`);
            console.log('ì„ íƒëœ ì°½ì‘ ë„ê¹¨ë¹„:', goblin);
            
            // ì±„íŒ… ì°½ ì—´ê¸°
            openChat(goblin);
        }
        
        // ğŸ’¬ ì±„íŒ… ì‹œìŠ¤í…œ ê´€ë ¨ ë³€ìˆ˜
        let currentChatGoblin = null;
        let chatHistory = [];
        
        // ğŸ’¬ ì±„íŒ… ì°½ ì—´ê¸°
        function openChat(goblin) {
            currentChatGoblin = goblin;
            const chatContainer = document.getElementById('chatContainer');
            const chatTitle = document.getElementById('chatTitle');
            const chatMessages = document.getElementById('chatMessages');
            
            chatTitle.textContent = `${goblin.emoji} ${goblin.name}ì™€ ëŒ€í™”`;
            chatContainer.style.display = 'flex';
            
            // í™˜ì˜ ë©”ì‹œì§€ ì¶”ê°€
            addChatMessage('ai', `ì•ˆë…•í•˜ì„¸ìš”! ì €ëŠ” ${goblin.name}ì…ë‹ˆë‹¤. ${goblin.description} ì–´ë–¤ ì°½ì‘ ë„ì›€ì´ í•„ìš”í•˜ì‹ ê°€ìš”?`);
            
            // ì…ë ¥ì°½ì— í¬ì»¤ìŠ¤
            document.getElementById('chatInput').focus();
        }
        
        // ğŸ’¬ ì±„íŒ… ì°½ ë‹«ê¸°
        function closeChat() {
            const chatContainer = document.getElementById('chatContainer');
            chatContainer.style.display = 'none';
            currentChatGoblin = null;
            
            // ì±„íŒ… ê¸°ë¡ ì´ˆê¸°í™”
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.innerHTML = '';
            chatHistory = [];
        }
        
        // ğŸ’¬ ì±„íŒ… ë©”ì‹œì§€ ì¶”ê°€
        function addChatMessage(type, message) {
            const chatMessages = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `chat-message ${type}-message`;
            messageDiv.textContent = message;
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // ì±„íŒ… ê¸°ë¡ì— ì¶”ê°€
            chatHistory.push({ type, message, timestamp: new Date() });
        }
        
        // ğŸ’¬ ì±„íŒ… ì…ë ¥ ì²˜ë¦¬
        function handleChatKeyPress(event) {
            if (event.key === 'Enter') {
                const input = document.getElementById('chatInput');
                const message = input.value.trim();
                
                if (message && currentChatGoblin) {
                    // ì‚¬ìš©ì ë©”ì‹œì§€ ì¶”ê°€
                    addChatMessage('user', message);
                    input.value = '';
                    
                    // AI ì‘ë‹µ ìƒì„± (ì‹œë®¬ë ˆì´ì…˜)
                    setTimeout(() => {
                        const aiResponse = generateCreativeGoblinResponse(message, currentChatGoblin);
                        addChatMessage('ai', aiResponse);
                    }, 1000);
                }
            }
        }
        
        // ğŸ¤– ì°½ì‘ ë„ê¹¨ë¹„ AI ì‘ë‹µ ìƒì„±
        function generateCreativeGoblinResponse(userMessage, goblin) {
            const lowerMessage = userMessage.toLowerCase();
            
            // ë„ê¹¨ë¹„ë³„ íŠ¹í™” ì‘ë‹µ
            switch (goblin.name) {
                case 'ğŸ¨ ë§ˆìŠ¤í„° í™”ê°€':
                    if (lowerMessage.includes('ìƒ‰ê¹”') || lowerMessage.includes('ìƒ‰ìƒ') || lowerMessage.includes('ê·¸ë¦¼')) {
                        return "ìƒ‰ì€ ê°ì •ì˜ ì–¸ì–´ì˜ˆìš”. ë¹¨ê°•ì€ ì—´ì •, íŒŒë‘ì€ í‰ì˜¨, ë…¸ë‘ì€ ê¸°ì¨ì„ í‘œí˜„í•´ìš”. ì–´ë–¤ ê°ì •ì„ ê·¸ë¦¬ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?";
                    } else if (lowerMessage.includes('ì˜ê°') || lowerMessage.includes('ì•„ì´ë””ì–´')) {
                        return "ì˜ê°ì€ ì¼ìƒ ì† ì‘ì€ ìˆœê°„ë“¤ì—ì„œ ì°¾ì„ ìˆ˜ ìˆì–´ìš”. ì°½ë¬¸ ë„ˆë¨¸ í’ê²½, ì‚¬ëŒë“¤ì˜ í‘œì •, ë¹›ì˜ ë³€í™”ë¥¼ ê´€ì°°í•´ë³´ì„¸ìš”.";
                    } else if (lowerMessage.includes('ê¸°ë²•') || lowerMessage.includes('ê·¸ë¦¬ëŠ”')) {
                        return "ì™„ë²½í•¨ë³´ë‹¤ëŠ” ê°ì •ì„ ë‹´ëŠ” ê²ƒì´ ì¤‘ìš”í•´ìš”. ë¶“ í„°ì¹˜ í•˜ë‚˜í•˜ë‚˜ì— ë§ˆìŒì„ ë‹´ì•„ë³´ì„¸ìš”.";
                    } else {
                        return "ì˜ˆìˆ ì€ ë§ˆìŒì˜ ì°½ì…ë‹ˆë‹¤. ë‹¹ì‹ ë§Œì˜ ë…íŠ¹í•œ ì‹œê°ìœ¼ë¡œ ì„¸ìƒì„ ë°”ë¼ë³´ê³  í‘œí˜„í•´ë³´ì„¸ìš”.";
                    }
                    
                case 'ğŸµ ìŒì•…ë§ˆì—ìŠ¤íŠ¸ë¡œ':
                    if (lowerMessage.includes('ìŒì•…') || lowerMessage.includes('ì‘ê³¡') || lowerMessage.includes('ë©œë¡œë””')) {
                        return "ìŒì•…ì€ ì‹œê°„ì„ ì¡°ê°í•˜ëŠ” ì˜ˆìˆ ì´ì—ìš”. ê°ì •ì˜ ë†’ë‚®ì´ë¥¼ ë©œë¡œë””ë¡œ í‘œí˜„í•´ë³´ì„¸ìš”.";
                    } else if (lowerMessage.includes('ë¦¬ë“¬') || lowerMessage.includes('ë°•ì')) {
                        return "ë¦¬ë“¬ì€ ìŒì•…ì˜ ì‹¬ì¥ë°•ë™ì´ì—ìš”. ìì—°ì˜ ì†Œë¦¬, ê±¸ìŒê±¸ì´, í˜¸í¡ì—ì„œ ë¦¬ë“¬ì„ ì°¾ì•„ë³´ì„¸ìš”.";
                    } else if (lowerMessage.includes('ì•…ê¸°') || lowerMessage.includes('ì—°ì£¼')) {
                        return "ì•…ê¸°ëŠ” ì˜í˜¼ì˜ ëª©ì†Œë¦¬ë¥¼ ëŒ€ì‹ í•´ì¤˜ìš”. ê¸°ìˆ ë³´ë‹¤ëŠ” ë§ˆìŒì„ ì „ë‹¬í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•´ìš”.";
                    } else {
                        return "ìŒì•…ì€ êµ­ê²½ê³¼ ì–¸ì–´ë¥¼ ë„˜ë‚˜ë“œëŠ” ë§ˆë²•ì´ì—ìš”. ë‹¹ì‹ ì˜ ë§ˆìŒì„ ì†Œë¦¬ë¡œ í‘œí˜„í•´ë³´ì„¸ìš”.";
                    }
                    
                case 'âœï¸ ìŠ¤í† ë¦¬í…”ëŸ¬':
                    if (lowerMessage.includes('ì´ì•¼ê¸°') || lowerMessage.includes('ì†Œì„¤') || lowerMessage.includes('ê¸€ì“°ê¸°')) {
                        return "ì¢‹ì€ ì´ì•¼ê¸°ëŠ” ë…ìì˜ ë§ˆìŒì— ì˜¤ë˜ ë‚¨ì•„ìš”. ë“±ì¥ì¸ë¬¼ì˜ ê°ì •ì— ê³µê°í•  ìˆ˜ ìˆê²Œ ì¨ë³´ì„¸ìš”.";
                    } else if (lowerMessage.includes('ìºë¦­í„°') || lowerMessage.includes('ì¸ë¬¼')) {
                        return "ë§¤ë ¥ì ì¸ ìºë¦­í„°ëŠ” ê²°ì ë„ ê°€ì ¸ì•¼ í•´ìš”. ì™„ë²½í•œ ì¸ë¬¼ë³´ë‹¤ëŠ” ì¸ê°„ì ì¸ ë©´ì´ ìˆëŠ” ì¸ë¬¼ì´ ì‚¬ë‘ë°›ì•„ìš”.";
                    } else if (lowerMessage.includes('í”Œë¡¯') || lowerMessage.includes('êµ¬ì„±')) {
                        return "ì‹œì‘ì€ í˜¸ê¸°ì‹¬ì„, ì¤‘ê°„ì€ ê¸´ì¥ê°ì„, ëì€ ì—¬ìš´ì„ ë‚¨ê²¨ì•¼ í•´ìš”. ë…ìê°€ ë‹¤ìŒ í˜ì´ì§€ë¥¼ ë„˜ê¸°ê³  ì‹¶ê²Œ ë§Œë“œì„¸ìš”.";
                    } else {
                        return "ëª¨ë“  ì‚¬ëŒì—ê²ŒëŠ” í•˜ë‚˜ì”©ì˜ íŠ¹ë³„í•œ ì´ì•¼ê¸°ê°€ ìˆì–´ìš”. ë‹¹ì‹ ì˜ ê²½í—˜ë„ ì†Œì¤‘í•œ ì´ì•¼ê¸°ê°€ ë  ìˆ˜ ìˆì–´ìš”.";
                    }
                    
                case 'ğŸ¬ ì˜í™”ê°ë…':
                    if (lowerMessage.includes('ì˜í™”') || lowerMessage.includes('ì˜ìƒ') || lowerMessage.includes('ì´¬ì˜')) {
                        return "ì˜í™”ëŠ” ì‹œê°ê³¼ ì²­ê°ìœ¼ë¡œ ê°ì •ì„ ì „ë‹¬í•˜ëŠ” ì¢…í•©ì˜ˆìˆ ì´ì—ìš”. í•œ í”„ë ˆì„ í•œ í”„ë ˆì„ì´ ì˜ë¯¸ë¥¼ ê°€ì ¸ì•¼ í•´ìš”.";
                    } else if (lowerMessage.includes('ìŠ¤í† ë¦¬ë³´ë“œ') || lowerMessage.includes('ì—°ì¶œ')) {
                        return "ì¢‹ì€ ì—°ì¶œì€ ê´€ê°ì´ ìºë¦­í„°ì˜ ê°ì •ì— ëª°ì…í•˜ê²Œ í•´ìš”. ì¹´ë©”ë¼ ê°ë„ì™€ ì¡°ëª…ìœ¼ë¡œ ë¶„ìœ„ê¸°ë¥¼ ë§Œë“¤ì–´ë³´ì„¸ìš”.";
                    } else if (lowerMessage.includes('í¸ì§‘') || lowerMessage.includes('ëª½íƒ€ì£¼')) {
                        return "í¸ì§‘ì€ ì˜í™”ì˜ ë¦¬ë“¬ì„ ë§Œë“¤ì–´ìš”. ë¹ ë¥¸ ì»·ì€ ê¸´ì¥ê°ì„, ê¸´ ì»·ì€ ì—¬ìœ ë¡œì›€ì„ í‘œí˜„í•´ìš”.";
                    } else {
                        return "ì˜í™”ëŠ” ê¿ˆì„ í˜„ì‹¤ë¡œ ë§Œë“œëŠ” ë§ˆë²•ì´ì—ìš”. ë‹¹ì‹ ì˜ ìƒìƒë ¥ì„ í™”ë©´ì— ë‹´ì•„ë³´ì„¸ìš”.";
                    }
                    
                case 'ğŸº ì¡°ê°ê°€':
                    if (lowerMessage.includes('ì¡°ê°') || lowerMessage.includes('ì¡°í˜•') || lowerMessage.includes('ëŒ')) {
                        return "ì¡°ê°ì€ ë¶ˆí•„ìš”í•œ ë¶€ë¶„ì„ ì œê±°í•´ì„œ ë³¸ì§ˆì„ ë“œëŸ¬ë‚´ëŠ” ì˜ˆìˆ ì´ì—ìš”. ì¬ë£Œ ì†ì— ìˆ¨ì–´ìˆëŠ” í˜•íƒœë¥¼ ë°œê²¬í•´ë³´ì„¸ìš”.";
                    } else if (lowerMessage.includes('í˜•íƒœ') || lowerMessage.includes('ëª¨ì–‘')) {
                        return "í˜•íƒœëŠ” ê³µê°„ì„ ì ìœ í•˜ëŠ” ë°©ì‹ì´ì—ìš”. ë¹›ê³¼ ê·¸ë¦¼ìì˜ ìƒí˜¸ì‘ìš©ì„ ê³ ë ¤í•´ì„œ ì‘ì—…í•´ë³´ì„¸ìš”.";
                    } else if (lowerMessage.includes('ì§ˆê°') || lowerMessage.includes('í‘œë©´')) {
                        return "ì§ˆê°ì€ ì†ëìœ¼ë¡œ ëŠë¼ëŠ” ê°ì •ì´ì—ìš”. ê±°ì¹ ê±°ë‚˜ ë¶€ë“œëŸ¬ìš´ í‘œë©´ì´ ë‹¤ë¥¸ ëŠë‚Œì„ ì „ë‹¬í•´ìš”.";
                    } else {
                        return "ì¡°ê°ì€ ì‹œê°„ê³¼ ê³µê°„ì„ ì´ˆì›”í•˜ëŠ” ì˜ˆìˆ ì´ì—ìš”. ë‹¹ì‹ ì˜ ì†ëì—ì„œ ì˜ì›í•œ í˜•íƒœê°€ íƒ„ìƒí•´ìš”.";
                    }
                    
                case 'ğŸ’ƒ ë¬´ìš©ê°€':
                    if (lowerMessage.includes('ì¶¤') || lowerMessage.includes('ë¬´ìš©') || lowerMessage.includes('ë™ì‘')) {
                        return "ì¶¤ì€ ëª¸ìœ¼ë¡œ ì“°ëŠ” ì‹œì˜ˆìš”. ëª¨ë“  ë™ì‘ì— ê°ì •ê³¼ ì˜ë¯¸ë¥¼ ë‹´ì•„ë³´ì„¸ìš”.";
                    } else if (lowerMessage.includes('í‘œí˜„') || lowerMessage.includes('ëª¸ì§“')) {
                        return "ëª¸ì€ ê°€ì¥ ì •ì§í•œ í‘œí˜„ ë„êµ¬ì˜ˆìš”. ë§ˆìŒì˜ ì›€ì§ì„ì´ ìì—°ìŠ¤ëŸ½ê²Œ ëª¸ì§“ìœ¼ë¡œ ë‚˜íƒ€ë‚˜ê²Œ í•˜ì„¸ìš”.";
                    } else if (lowerMessage.includes('ë¦¬ë“¬') || lowerMessage.includes('ë°•ì')) {
                        return "ë¦¬ë“¬ì€ ëª¸ì˜ ì–¸ì–´ì˜ˆìš”. ìŒì•…ì„ ì˜¨ëª¸ìœ¼ë¡œ ëŠë¼ê³ , ê·¸ ê°ì •ì„ ì›€ì§ì„ìœ¼ë¡œ í‘œí˜„í•´ë³´ì„¸ìš”.";
                    } else {
                        return "ì¶¤ì€ ìˆœê°„ìˆœê°„ì„ ì˜ˆìˆ ë¡œ ë§Œë“œëŠ” ë§ˆë²•ì´ì—ìš”. ë‹¹ì‹ ì˜ ëª¸ì§“ì´ ì•„ë¦„ë‹¤ìš´ ì´ì•¼ê¸°ê°€ ë˜ë„ë¡ í•˜ì„¸ìš”.";
                    }
                    
                default:
                    return "ì°½ì‘ì€ ë§ˆìŒì—ì„œ ì‹œì‘ë˜ëŠ” ì—¬í–‰ì´ì—ìš”. ë‹¹ì‹ ë§Œì˜ ë…íŠ¹í•œ ì‹œê°ìœ¼ë¡œ ì„¸ìƒì„ í‘œí˜„í•´ë³´ì„¸ìš”.";
            }
        }
        
        // ğŸ¨ ì°½ì‘ êµ¬ì—­ í™˜ê²½ ìƒì„±
        function createCreativeEnvironment() {
            // ğŸ–¼ï¸ ì•„íŠ¸ ê°¤ëŸ¬ë¦¬ë“¤
            for (let i = 0; i < 12; i++) {
                createArtGallery();
            }
            
            // ğŸ­ ë¬´ëŒ€ë“¤
            for (let i = 0; i < 8; i++) {
                createArtStage();
            }
            
            // ğŸŒˆ ì»¬ëŸ¬ ë¶„ìˆ˜ë“¤
            for (let i = 0; i < 6; i++) {
                createColorFountain();
            }
            
            // ğŸª ì°½ì‘ ì¡°ëª…
            createCreativeLighting();
        }
        
        // ğŸ–¼ï¸ ì•„íŠ¸ ê°¤ëŸ¬ë¦¬ ìƒì„±
        function createArtGallery() {
            const galleryGroup = new THREE.Group();
            
            // ê°¤ëŸ¬ë¦¬ ë²½
            const wallGeometry = new THREE.BoxGeometry(6, 8, 0.2);
            const wallMaterial = new THREE.MeshPhongMaterial({ color: 0xffffff });
            const wall = new THREE.Mesh(wallGeometry, wallMaterial);
            galleryGroup.add(wall);
            
            // ì•¡ìë“¤
            for (let i = 0; i < 3; i++) {
                const frameGeometry = new THREE.PlaneGeometry(1.5, 2);
                const colors = [0xff6b9d, 0x9b59b6, 0x3498db, 0xe74c3c, 0xf39c12, 0x27ae60];
                const frameMaterial = new THREE.MeshBasicMaterial({ 
                    color: colors[Math.floor(Math.random() * colors.length)],
                    transparent: true,
                    opacity: 0.8
                });
                const frame = new THREE.Mesh(frameGeometry, frameMaterial);
                frame.position.set((i - 1) * 2, 1, 0.2);
                galleryGroup.add(frame);
            }
            
            const x = (Math.random() - 0.5) * 70;
            const z = (Math.random() - 0.5) * 70;
            galleryGroup.position.set(x, 4, z);
            galleryGroup.rotation.y = Math.random() * Math.PI * 2;
            
            scene.add(galleryGroup);
        }
        
        // ğŸ­ ë¬´ëŒ€ ìƒì„±
        function createArtStage() {
            const stageGroup = new THREE.Group();
            
            // ë¬´ëŒ€ ë°”ë‹¥
            const stageGeometry = new THREE.CylinderGeometry(4, 4, 0.5);
            const stageMaterial = new THREE.MeshPhongMaterial({ color: 0x8e44ad });
            const stage = new THREE.Mesh(stageGeometry, stageMaterial);
            stageGroup.add(stage);
            
            // ì»¤íŠ¼ë“¤
            for (let i = 0; i < 8; i++) {
                const curtainGeometry = new THREE.PlaneGeometry(1, 6);
                const curtainMaterial = new THREE.MeshPhongMaterial({ 
                    color: 0xe74c3c,
                    transparent: true,
                    opacity: 0.7
                });
                const curtain = new THREE.Mesh(curtainGeometry, curtainMaterial);
                
                const angle = (i / 8) * Math.PI * 2;
                curtain.position.set(Math.cos(angle) * 4.5, 3, Math.sin(angle) * 4.5);
                curtain.lookAt(0, 3, 0);
                stageGroup.add(curtain);
            }
            
            const x = (Math.random() - 0.5) * 80;
            const z = (Math.random() - 0.5) * 80;
            stageGroup.position.set(x, 0, z);
            
            scene.add(stageGroup);
        }
        
        // ğŸŒˆ ì»¬ëŸ¬ ë¶„ìˆ˜ ìƒì„±
        function createColorFountain() {
            const fountainGroup = new THREE.Group();
            
            // ë¶„ìˆ˜ ë² ì´ìŠ¤
            const baseGeometry = new THREE.CylinderGeometry(2, 2.5, 1);
            const baseMaterial = new THREE.MeshPhongMaterial({ color: 0xecf0f1 });
            const base = new THREE.Mesh(baseGeometry, baseMaterial);
            fountainGroup.add(base);
            
            // ì»¬ëŸ¬ ë¬¼ë°©ìš¸ë“¤
            for (let i = 0; i < 20; i++) {
                const dropGeometry = new THREE.SphereGeometry(0.1);
                const colors = [0xff6b9d, 0x9b59b6, 0x3498db, 0xe74c3c, 0xf39c12, 0x27ae60];
                const dropMaterial = new THREE.MeshBasicMaterial({ 
                    color: colors[Math.floor(Math.random() * colors.length)],
                    transparent: true,
                    opacity: 0.8
                });
                const drop = new THREE.Mesh(dropGeometry, dropMaterial);
                
                drop.position.set(
                    (Math.random() - 0.5) * 3,
                    Math.random() * 8,
                    (Math.random() - 0.5) * 3
                );
                fountainGroup.add(drop);
                
                // ë¬¼ë°©ìš¸ ì• ë‹ˆë©”ì´ì…˜
                gsap.to(drop.position, {
                    y: drop.position.y + 3,
                    duration: 2 + Math.random() * 2,
                    repeat: -1,
                    yoyo: true,
                    ease: "sine.inOut"
                });
            }
            
            const x = (Math.random() - 0.5) * 60;
            const z = (Math.random() - 0.5) * 60;
            fountainGroup.position.set(x, 0, z);
            
            scene.add(fountainGroup);
        }
        
        // ğŸª ì°½ì‘ ì¡°ëª…
        function createCreativeLighting() {
            const ambientLight = new THREE.AmbientLight(0x404040, 0.4);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.6);
            directionalLight.position.set(10, 20, 10);
            directionalLight.castShadow = true;
            scene.add(directionalLight);
            
            // ì»¬ëŸ¬ ìŠ¤í¬íŠ¸ë¼ì´íŠ¸ë“¤
            const colors = [0xff6b9d, 0x9b59b6, 0x3498db, 0xe74c3c, 0xf39c12, 0x27ae60];
            for (let i = 0; i < 6; i++) {
                const spotLight = new THREE.SpotLight(colors[i], 0.8, 30, Math.PI / 6);
                spotLight.position.set(
                    Math.cos(i) * 25,
                    15,
                    Math.sin(i) * 25
                );
                spotLight.target.position.set(0, 0, 0);
                scene.add(spotLight);
                scene.add(spotLight.target);
                
                // ì¡°ëª… ë³€í™” íš¨ê³¼
                gsap.to(spotLight, {
                    intensity: 0.3,
                    duration: 2 + i * 0.3,
                    repeat: -1,
                    yoyo: true,
                    ease: "sine.inOut"
                });
            }
        }
        
        // ğŸ¨ ì°½ì‘ êµ¬ì—­ ì´ˆê¸°í™”
        function initCreativeDistrict() {
            console.log('ğŸ¨ ì°½ì‘ êµ¬ì—­ ì´ˆê¸°í™” ì‹œì‘...');
            
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x2c1810);
            
            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.set(0, 18, 28);
            
            const canvas = document.getElementById('creative-canvas');
            renderer = new THREE.WebGLRenderer({ canvas: canvas, antialias: true });
            renderer.setSize(window.innerWidth, window.innerHeight);
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap;
            
            controls = new THREE.OrbitControls(camera, renderer.domElement);
            controls.enableDamping = true;
            controls.dampingFactor = 0.05;
            
            // ğŸ¨ ì°½ì‘ êµ¬ì—­ í™˜ê²½ ìƒì„±
            createCreativeEnvironment();
            
            // ğŸ¨ 3D ì°½ì‘ ë„ê¹¨ë¹„ë“¤ ìƒì„±
            createCreative3DGoblins();
            
            // ğŸ¨ ì°½ì‘ ë„ê¹¨ë¹„ ì¹´ë“œ ìƒì„±
            createCreativeGoblinCards();
            
            // ğŸ–±ï¸ ìº”ë²„ìŠ¤ í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€
            canvas.addEventListener('click', onCreativeCanvasClick);
            
            isSystemReady = true;
            updateStatus('ğŸ¨ ì°½ì‘ êµ¬ì—­ì´ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤! ì˜ˆìˆ ì˜ ì˜ê°ì„ ëŠê»´ë³´ì„¸ìš”!');
            
            animate();
        }
        
        // ğŸ¬ ì• ë‹ˆë©”ì´ì…˜ ë£¨í”„
        function animate() {
            requestAnimationFrame(animate);
            
            if (controls) {
                controls.update();
            }
            
            if (avatar && controls) {
                controls.target.copy(avatar.position);
                controls.target.y += 1;
            }
            
            // ğŸ·ï¸ ëª¨ë“  ì´ë¦„í‘œë“¤ì´ ì¹´ë©”ë¼ë¥¼ ë°”ë¼ë³´ë„ë¡ ì—…ë°ì´íŠ¸
            scene.traverse((object) => {
                if (object.userData && object.userData.isNameTag && camera) {
                    object.lookAt(camera.position);
                }
            });
            
            if (renderer && scene && camera) {
                renderer.render(scene, camera);
            }
        }
        
        // ğŸ“± ìœˆë„ìš° ë¦¬ì‚¬ì´ì¦ˆ ì²˜ë¦¬
        window.addEventListener('resize', () => {
            if (camera && renderer) {
                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();
                renderer.setSize(window.innerWidth, window.innerHeight);
            }
        });
        
        // ğŸš€ ì°½ì‘ êµ¬ì—­ ì‹œì‘
        window.addEventListener('load', () => {
            initCreativeDistrict();
        });
    </script>
</body>
</html>
